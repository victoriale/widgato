function getEnv(e){return e=null!=e.match(/localhost/g)||null!=e.match(/dev/g)?"dev":null!=e.match(/qa/g)?"qa":"prod"}function synapsysENV(e){return e=null!=e.match(/localhost/g)||null!=e.match(/dev/g)?"dev-":"qa"==e.match(/qa/g)?"qa-":""}function setupEnvironment(e){apiCallUrl=protocolToUse;var t,a=e.category,i=window.location.hostname.split(".")[0];t=null!=e.env?e.env?e.env:"prod":getEnv(i),imageUrl=protocolToUse+synapsysENV(i)+imageUrl,subCategory=e.category,"nfl"==e.category||"ncaaf"==e.category||"football"==e.category||"nflncaaf"==e.category?apiCallUrl+=t+"-"+tdlApi:apiCallUrl+=synapsysENV(i)+dwApi+"?cat="+a,fallBackApi=protocolToUse+synapsysENV(i)+dwApi+"?cat=mlb"}function updateList(e){if(currentIndex=0,"nfl"==query.category||"ncaaf"==query.category||"football"==query.category)getFootballList(query.category);else{listRand=Number(listRand)+Number(e);runAPI(apiCallUrl+"&rand="+listRand)}}function getFootballList(e){if("nfl"==e)var t="../js/tdl_list_array.json";else if("ncaaf"==e)var t="../js/tdl_list_array_ncaaf.json";else if("nflncaaf"==e)if(rand=Math.floor(2*Math.random()+1),1==rand){var t="../js/tdl_list_array_ncaaf.json";l.category="ncaaf"}else{var t="../js/tdl_list_array.json";l.category="nfl"}var a=new XMLHttpRequest;a.onreadystatechange=function(){4===a.readyState&&200===a.status&&(jsonArray=JSON.parse(a.responseText),getRandFootballList(jsonArray))},a.open("GET",t,!0),a.send(null)}function getRandFootballList(e){rand=Math.floor(Math.random()*(e.length-1)+1);var t,a=new Date,i=new Date("09/15/"+a.getFullYear());t=a.getMonth()==i.getMonth()&&a.getDate()>=i.getDate()?e[rand]+"&season="+a.getFullYear():a.getMonth()>i.getMonth()?e[rand]+"&season="+a.getFullYear():e[rand]+"&season="+(a.getFullYear()-1),apiCallUrl+=t,runAPI(apiCallUrl)}function onLoad(e){"complete"==document.readyState||"interactive"==document.readyState?e():document.addEventListener?document.addEventListener("DOMContentLoaded",e):document.attachEvent&&document.attachEvent("onreadystatechange",function(){"complete"==document.readyState&&e()})}function runAPI(e){if(window.XMLHttpRequest)var t=new XMLHttpRequest;else var t=new ActiveXObject("Microsoft.XMLHTTP");t.onreadystatechange=function(){if(this.readyState==XMLHttpRequest.DONE)if(200==this.status)widgetData=JSON.parse(this.responseText),onLoad(displayWidget);else{var t=this.statusText;if(500==this.status)try{t=JSON.parse(this.responseText).message}catch(e){console.log("No JSON message")}if(t="HTTP Error ("+this.status+"): "+t,tries>maxTries-2&&(console.warn(t+" | hiding widget container | => SWAPPING TO FALLBACK"),e=fallBackApi+"&rand=1",apiCallUrl=fallBackApi),tries++>maxTries)throw document.getElementsByClassName("e_container")[0].style.display="none",t+" | hiding widget fallback failed container | => PLEASE CONTACT YOUR PROVIDER";setTimeout(runAPI(e),500)}},t.open("GET",e,!0),t.send()}function displayWidget(){try{var e;if("football"==query.category||"nfl"==query.category||"ncaaf"==query.category){var t=widgetData.data.listData;setCategoryColors(subCategory),maxIndex=t.length;var a=t[currentIndex];$("profile-rank").innerHTML=a.rank,"player"==a.rankType?(e=null!=a.playerHeadshotUrl&&""!=a.playerHeadshotUrl?checkImage(imageUrl+a.playerHeadshotUrl):null,null!=e?(createPuzzle(e,!1),$("profile-name").innerHTML=a.playerFirstName+" "+a.playerLastName,$("profile-datapoint1").innerHTML="Team: ",$("profile-datavalue1").innerHTML=a.teamName,$("profile-datavalue2").innerHTML=Number(a.stat).toFixed(2),$("profile-datapoint2").innerHTML=" "+a.statDescription):updateIndex(1)):(e=null!=a.teamLogo&&""!=a.teamLogo?checkImage(imageUrl+a.teamLogo):null,null!=e?(createPuzzle(e,!1),$("profile-name").innerHTML=a.teamName,$("profile-datapoint1").innerHTML="Division: ",$("profile-datavalue1").innerHTML=a.divisionName,$("profile-datavalue2").innerHTML=Number(a.stat).toFixed(2),$("profile-datapoint2").innerHTML=": "+a.statDescription):updateIndex(1))}else{var t=widgetData.l_data;setCategoryColors(subCategory),maxIndex=t.length;var a=t[currentIndex];e=null!=a.li_img&&""!=a.li_img?checkImage(a.li_img):null,null!=e?(createPuzzle(e,!1),$("profile-rank").innerHTML=a.li_rank,$("profile-name").innerHTML=a.li_title,$("profile-datavalue1").innerHTML=a.li_sub_txt,$("profile-datapoint2").innerHTML=a.li_tag,$("profile-datavalue2").innerHTML=" "+a.li_value):updateIndex(1)}$("dw").style.display="block"}catch(e){console.log("Error in displaying widget Data"),console.log(e)}}function setCategoryColors(e){function t(e,t){try{var a=$(e),i=new RegExp("inheritor","g"),n="default"==t?"":t+"-",l=a.className.split(" ").filter(function(e){return null!=e.match(i)?e.match(i):null});switch(e){case"color_inheritor":a.classList.remove(l[0]),a.classList.add(n+"inheritor");break;case"background_inheritor":a.classList.remove(l[0]),a.classList.add(n+"inheritor_img_bg");break;case"button_inheritor":for(var r=0;r<l.length;r++)a.classList.remove(l[r]);a.classList.add(n+"inheritor_border"),a.classList.add(n+"inheritor_bg")}}catch(e){console.log("Color Inheritor Error",e)}}switch(e){case"football":case"nfl":case"ncaaf":case"nflncaaf":e="football";break;case"basketball":case"nba":case"ncaam":case"college_basketball":e="basketball";break;case"baseball":case"mlb":e="baseball";break;default:e="default"}t("color_inheritor",e),t("button_inheritor",e)}function updateIndex(e){currentIndex+=e,currentIndex<0?currentIndex=maxIndex-1:currentIndex>=maxIndex&&(currentIndex=0),displayWidget()}function checkImage(e){return null!=e&&-1==e.indexOf("no-image")&&-1==e.indexOf("no_image")&&-1==e.indexOf("no_player")&&-1==window.location.pathname.indexOf("_970")?e+"?width="+300*window.devicePixelRatio:null}function createPuzzle(e,t){var a,i,n;i=function(){function e(e,t){if(t)this.solveMe(e);else{var i,l,r,s,o;for(this.puzzleImage=e,this.initialTiles=[],this.tiles=[],this.emptyTile.bind(this.emptyTile,this),this.randomize.bind(this.randomize,this),this.render.bind(this.render,this),this.swapTile.bind(this.swapTile,this),this.solved.bind(this.solved,this),i=l=0;l<=7;i=++l)s=100*Math.floor(i%3),o=104*Math.floor(i/3),r=new n(i,100,104,s,o,this.puzzleImage),this.tiles.push(r);this.tiles.push(new a(8)),this.initialTiles=this.tiles.slice(0),this.randomize()}}return e.prototype.emptyTile=function(){var e,t,a,i,n;for(n=this.tiles,a=e=0,t=n.length;e<t;a=++e)if(i=n[a],"empty"===i.class)return a},e.prototype.randomize=function(){var e,t,a,i;for(e=8,a=[],t=0;t<=10;++t)i=Math.floor(9*Math.random()),this.swapTile(i,e),a.push(e=i);return a},e.prototype.render=function(){var e,t,a,i,n,l=this;if(e=this.emptyTile(),$("puzzle").innerHTML="",this.solved()){var r=document.createElement("div");return r.setAttribute("id","puzzle-div"),r.setAttribute("style","background-image: url("+this.puzzleImage+")"),$("solve").style.display="none",$("puzzle").appendChild(r),$("dw-container").style.display="block",$("puzzle-div").style.display="block"}var s=document.createElement("div");s.setAttribute("id","puzzle-background"),s.setAttribute("style","background-image: url("+this.puzzleImage+")");var o=document.createElement("div");o.setAttribute("id","img-background"),s.appendChild(o);var d=$("solve-me");for(d.setAttribute("onclick","createPuzzle('"+this.puzzleImage+"', true);"),$("solve").style.display="block",$("puzzle").appendChild(s),$("dw-container").style.display="none",n=this.tiles,t=0,a=n.length;t<a;t++)i=n[t],i.show(e);var c=document.getElementsByClassName("tile");Array.from(c).forEach(function(e){return e.addEventListener("click",function(e){var t;return t=parseInt(e.target.id),l.swapTile(t,l.emptyTile())})})},e.prototype.solveMe=function(e){var t=document.createElement("div");return t.setAttribute("id","puzzle-div"),t.setAttribute("style","background-image: url("+e+")"),$("solve").style.display="none",$("puzzle").appendChild(t),$("dw-container").style.display="block",$("puzzle-div").style.display="block"},e.prototype.swapTile=function(e,t){var a,i;return a=this.tiles[e],i=this.tiles[t],this.tiles[t]=a,this.tiles[e]=i,this.tiles[t].position=t,this.render()},e.prototype.solved=function(){var e,t;for(e=t=0;t<=8;e=++t)if(this.tiles[e]!==this.initialTiles[e])return!1;return!0},e}(),n=function(){function e(e,t,a,i,n,l){this.height=a,this.puzzleImage=l,this.position=e,this.width=t,this.x=i,this.y=n,this.class="square"}return e.prototype.show=function(e){function t(e,t){for(var a in t)e.setAttribute(a,t[a])}var a=document.createElement("div");this.isNext(e)?t(a,{id:this.position,class:"innerTile image tile"}):t(a,{id:this.position,class:"innerTile image"});var i=document.createElement("div");return 4!==this.position||$("4")?7!==this.position||$("4")||(i.setAttribute("class","animated pulse"),a.appendChild(i)):(i.setAttribute("class","animated pulse"),a.appendChild(i)),$("puzzle").appendChild(a),$(this.position).style.backgroundPosition="-"+this.x+"px -"+this.y+"px",$(this.position).style.backgroundImage="url('"+this.puzzleImage+"')"},e.prototype.isNext=function(e){return e-1===this.position&&e%3>0||e+1===this.position&&e%3<2||e+3===this.position&&e/3<2||e-3===this.position&&e/3>0},e}(),a=function(){function e(e){this.position=e,this.class="empty"}return e.prototype.show=function(){var e=document.createElement("div");return e.setAttribute("class","innerTile empty"),e.setAttribute("id","emptyTile"),$("puzzle").appendChild(e)},$("solve").style.display="block",$("dw-container").style.display="none",e}();new i(e,t)}var protocolToUse="https:"==location.protocol?"https://":"http://",temp=location.search,query={},apiCallUrl,imageUrl="images.synapsys.us",dwApi="dw.synapsys.us/list_api.php",tdlApi="touchdownloyal-api.synapsys.us/list/",fallBackApi,href=window.top.location,currentIndex=0,maxIndex=1,widgetData,tries=0,maxTries=5,listRand=0,subCategory;document.addEventListener("DOMContentLoaded",function(e){null!=temp&&temp.length>0?(query=JSON.parse(decodeURIComponent(temp.substr(1))),listRand=query.rand?query.rand:0,setupEnvironment(query),updateList(0)):console.log("No query found on widget")});