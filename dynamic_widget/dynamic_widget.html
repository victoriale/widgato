<!doctype html>
<html lang="en">
<head>
  <title>Dynamic Widget</title>
  <meta charset='utf-8'>
  <link rel="stylesheet" type="text/css" href="../css/dynamic_widget_svg.css">
  <link href='http://fonts.googleapis.com/css?family=Lato' rel='stylesheet' type='text/css'>
  <base target="_blank">
</head>
<body>
  <div class="dw">
    <!-- Title -->
    <div class="dw-title"></div>
    <a target="_blank" href="" id="homelink"><div class="bg-img dw-icon"></div></a>

    <!-- Carousel -->
    <div class="dw-carousel">
      <!-- Left Nav -->
      <svg class="dw-nav dw-c-l" stroke="#FFFFFF" onclick="dynamic_widget.prev_item()"><path d="m 17,23 L 10,30 L 17,37" stroke-width="2" fill="none" stroke-linecap="round" /></svg>
      <!-- Images -->
      <a target="_blank" href="" id="subimg">
        <div class="bg-img dw-big dw-c-sub">
          <div class="hover">
            View<br>
            <span style="font-size: 18px; font-weight: bold">Profile</span>
          </div>
        </div>
      </a>
      <a target="_blank" href="" id="mainurl">
        <div class="bg-img dw-big dw-c-img">
          <div class="hover">
            View<br>
            <span style="font-size: 18px; font-weight: bold">Profile</span>
          </div>
        </div>
      </a>
      <div class="dw-sm dw-c-num"></div>
      <!-- Right Nav -->
      <svg class="dw-nav dw-c-r" stroke="#FFFFFF" onclick="dynamic_widget.prev_item()"><path d="m 14,23 L 21,30 L 14,37" stroke-width="2" fill="none" stroke-linecap="round" /></svg>
    </div>

    <!-- Sub Info -->
    <div class="dw-info">
      <div class="dw-i-title" id="line1"><a target="_blank" id="dw-i-title"></a></div>
      <div class="dw-i-title" id="line2"></div>
      <div class="dw-i-desc"></div>
    </div>

    <!-- See Whole List Button -->
    <a target="_blank" id="list-link" href=""><div class="dw-btn" href="http://google.com">
      SEE THE LIST
      <svg width="12" height="13"><path stroke-linejoin="round" stroke-linecap="round" d="m2.33,11 l 0,-1.66 q 0,-3.33 3.33,-3.33 l 2.66,0 l 0,2 l 3.33,-3.33 l -3.33,-3.33 l 0,2 l -2.66,0 q -6.66,0 -3.33,7.66" /></svg>
    </div></a>
  </div>
  <script type="text/javascript" src="../js/dynamic_widget.js"></script>
  <script>
  // Add CSS file for styles
  (function(){
    // generate CSS name
    var css_url = "../css/dynamic_widget_",
    conf = JSON.parse(decodeURIComponent(location.search.substr(1))),

    // Array with the correct names for categories
    array = {
      nba: "sports",
      college_basketball: "sports",
      finance: "finance",
      crime: "crime",
      demographics: "demographics",
      weather: "weather"
    };

    // Check for politics (handled when list is received)
    if ( conf.category == "politics" ) {
      return false;
    }

    // Get the complete URL
    if ( typeof(conf.category) == "undefined" || typeof(array[conf.category]) == "undefined" ) {
      conf.category = "finance";
    }
    css_url += array[conf.category] + ".css";

    // Create link element
    link = document.createElement("link");
    link.href = css_url;
    link.type = "text/css";
    link.rel = "stylesheet";
    link.media = "screen,print";

    // Add link to the document
    document.getElementsByTagName("head")[0].appendChild(link);
  })();

  // Set up google analytics hover event
  var hoverInterval = null;
  var dw = document.getElementsByClassName('dw')[0];
  // Mouse over
  dw.addEventListener('mouseover', function(){
    hoverInterval = setInterval(function() {
      if ( typeof dynamic_widget != "undefined" && typeof dataLayer != "undefined" ) {
        dataLayer.push({'event':'widget-hover','eventAction':dynamic_widget.get_title()});
      }
    }, 1000);
  });
  // Mouse out
  dw.addEventListener('mouseout', function(){
    if ( typeof hoverInterval != "undefined" && hoverInterval != null ) {
      clearInterval(hoverInterval);
    }
  });
  </script>
</body>
</html>
