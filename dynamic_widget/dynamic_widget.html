<!doctype html>
<html lang="en">
<head>
  <title>Dynamic Widget</title>
  <meta charset='utf-8'>
  <base target="_blank">
  <link rel="stylesheet" type="text/css" href="../css/dynamic_widget_svg.css">
  <link href='http://fonts.googleapis.com/css?family=Lato' rel='stylesheet' type='text/css'>
  <script async type="text/javascript" src="../js/dynamic_widget.js"></script>
  <!-- Google Tag Manager -->
  <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-TG8P9M"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-TG8P9M');</script>
  <!-- End Google Tag Manager -->
</head>
<body>
  <div class="dw">
    <!-- Title -->
    <div class="dw-title" id="title"></div>
    <a target="_blank" href="" id="homelink"><div class="bg-img dw-icon"></div></a>

    <!-- Carousel -->
    <div class="dw-carousel" id="carousel">
      <!-- Left Nav -->
      <svg class="noselect dw-nav dw-c-l" stroke="#FFFFFF" onclick="dynamic_widget.prev_item()"><path d="m 17,23 L 10,30 L 17,37" stroke-width="2" fill="none" stroke-linecap="round"></path></svg>
      <!-- Images -->
      <a target="_blank" href="" id="suburl">
        <img class="dw-big dw-c-sub" id="subimg" onerror="this.src='http://w1.synapsys.us/widgets/css/public/no_image.jpg'">
        <div class="hover dw-c-sub dw-big">
          View<br>
          <span>Profile</span>
        </div>
      </a>
      <a target="_blank" href="" id="mainurl">
        <img class="dw-big dw-c-img" id="mainimg" onerror="this.src='http://w1.synapsys.us/widgets/css/public/no_image.jpg'">
        <div class="hover dw-c-img dw-big">
          View<br>
          <span>Profile</span>
        </div>
      </a>
      <div class="dw-sm dw-c-num" id="num"></div>
      <!-- Right Nav -->
      <svg class="noselect dw-nav dw-c-r" stroke="#FFFFFF" onclick="dynamic_widget.next_item()"><path d="m 14,23 L 21,30 L 14,37" stroke-width="2" fill="none" stroke-linecap="round"></path></svg>
    </div>

    <!-- Sub Info -->
    <div class="dw-info">
      <div class="dw-i-title"><a target="_blank" id="line1"></a></div>
      <div class="dw-i-title" id="line2"></div>
      <div class="dw-i-desc" id="desc"></div>
    </div>

    <!-- See Whole List Button -->
    <a target="_blank" id="list-link" href=""><div class="dw-btn" href="http://google.com">
      SEE THE LIST
      <svg width="12" height="13"><path stroke-linejoin="round" stroke-linecap="round" d="m2.33,11 l 0,-1.66 q 0,-3.33 3.33,-3.33 l 2.66,0 l 0,2 l 3.33,-3.33 l -3.33,-3.33 l 0,2 l -2.66,0 q -6.66,0 -3.33,7.66"></path></svg>
    </div></a>
  </div>
  <script>
  // Function for creating a link and adding it to the head
  function add_css_link(url) {
    // Create the link node
    var link = document.createElement("link");
    link.href = url;
    link.type = "text/css";
    link.rel = "stylesheet";

    // Add the link to the document
    var head = document.getElementsByTagName("head")[0];
    head.insertBefore(link, head.childNodes[0]);
  } // --> add_css_link

  // Add CSS file for styles
  (function(){
    // generate CSS name
    var css_url = "../css/dynamic_widget_",
    conf = JSON.parse(decodeURIComponent(location.search.substr(1))),

    // Array with the correct names for categories
    array = {
      nba: "sports",
      college_basketball: "sports",
      finance: "finance",
      crime: "crime",
      demographics: "demographics",
      disaster: "disaster",
      weather: "weather"
    };

    // Check for politics (handled when list is received)
    if ( conf.category == "politics" ) {
      return false;
    }

    // Get the complete URL
    if ( typeof(conf.category) == "undefined" || typeof(array[conf.category]) == "undefined" ) {
      conf.category = "finance";
    }
    css_url += array[conf.category] + ".css";

    // Create link element
    add_css_link(css_url);
  })();

  // Set up google analytics hover event
  var hoverInterval = null;
  var dw = document.getElementsByClassName('dw')[0];
  // Mouse over
  dw.addEventListener('mouseover', function(){
    hoverInterval = setInterval(function() {
      if ( typeof dynamic_widget != "undefined" && typeof dataLayer != "undefined" ) {
        dataLayer.push({'event':'widget-hover','eventAction':dynamic_widget.get_title()});
      }
    }, 1000);
  });
  // Mouse out
  dw.addEventListener('mouseout', function(){
    if ( typeof hoverInterval != "undefined" && hoverInterval != null ) {
      clearInterval(hoverInterval);
    }
  });
  </script>
</body>
</html>
