dynamic_widget=function(){var api_url="http://108.170.11.234:190/list_api.php",ci=0,wd={},wc=JSON.parse(decodeURIComponent(location.search.substr(1))),tries=0,categories=["finance","nba","college_basketball","weather","crime","demographics","politics","disaster"];function get_data(){if(typeof wc.category=="undefined"||categories.indexOf(wc.category)==-1){wc.category="finance"}var random=typeof wc.rand!="undefined"&&tries==0?wc.rand:Math.floor(Math.random()*10);var xmlhttp;if(window.XMLHttpRequest){xmlhttp=new XMLHttpRequest}else{xmlhttp=new ActiveXObject("Microsoft.XMLHTTP")}xmlhttp.onreadystatechange=function(){if(xmlhttp.readyState==XMLHttpRequest.DONE){if(xmlhttp.status==200){wd=JSON.parse(xmlhttp.responseText);if(document.readyState=="complete"||document.readyState=="interactive"){create_widget()}else if(document.addEventListener){document.addEventListener("DOMContentLoaded",create_widget)}else if(document.attachEvent){document.attachEvent("onreadystatechange",function(){if(document.readyState=="complete"){create_widget()}})}}else{var msg=xmlhttp.statusText;if(xmlhttp.status==500){try{msg=JSON.parse(xmlhttp.responseText).message}catch(e){console.log("No JSON message")}}msg="HTTP Error ("+xmlhttp.status+"): "+msg;if(tries++>10){throw msg}setTimeout(get_data,500)}}};xmlhttp.open("GET",api_url+"?partner="+(typeof wc.dom!="undefined"?wc.dom:"")+"&cat="+wc.category+"&rand="+random,true);xmlhttp.send()}function create_widget(){if(typeof dataLayer!="undefined"){dataLayer.push({event:"widget-title",eventAction:dynamic_widget.get_title()})}if(wc.category=="politics"){var letter=wd.l_title.indexOf("Republican")!=-1?"r":wd.l_title.indexOf("Independent")!=-1?"i":"d";add_css_link("../css/dynamic_widget_politics_"+letter+".css")}document.getElementById("title").innerHTML=wd.l_title;switch(wc.category){case"nba":var base_url=wc.remn=="true"?"http://www.hoopsloyal.com/NBA/widget-list":"http://www.myhoopszone.com/"+wc.dom+"/NBA/w-list";break;case"college_basketball":var base_url=wc.remn=="true"?"http://www.hoopsloyal.com/NCAA/widget-list":"http://www.myhoopszone.com/"+wc.dom+"/NCAA/w-list";break;case"finance":var base_url=wc.remn=="true"?"http://www.investkit.com/widget-list":"http://www.myinvestkit.com/"+wc.dom+"/w-list";break;default:var base_url=wc.remn=="true"?"http://www.joyfulhome.com/widget-list":"http://www.myhousekit.com/"+wc.dom+"/w-list"}document.getElementById("list-link").href=base_url+"?tw="+wd.l_param+"&sw="+wd.l_sort+"&input="+wd.l_input;display_item()}function display_item(){var cd=wd.l_data[ci];cd.li_url=wc.remn=="true"?cd.li_primary_url:cd.li_partner_url.replace("{partner}",wc.dom);document.getElementById("line1").innerHTML=cd.li_title;document.getElementById("line2").innerHTML=cd.li_sub_txt;document.getElementById("desc").innerHTML=cd.li_str;document.getElementById("line1").href=cd.li_url;document.getElementById("mainimg").src="";document.getElementById("mainimg").src=cd.li_img;document.getElementById("mainurl").href=cd.li_url;document.getElementById("num").innerHTML="#"+cd.li_rank;if(cd.li_subimg!==false){var sub_li_url=wc.remn=="true"?cd.li_subimg.primary_url:cd.li_subimg.partner_url.replace("{partner}",wc.dom);document.getElementById("subimg").src="";document.getElementById("subimg").src=cd.li_subimg.img;document.getElementById("suburl").href=sub_li_url;var carousel=document.getElementById("carousel");if(carousel.className.indexOf("two")==-1){carousel.className+=" two"}}}function carousel(dir){ci+=dir;ci=ci>=wd.l_data.length?0:ci<0?wd.l_data.length-1:ci;display_item();if(typeof dataLayer!="undefined"){dataLayer.push({event:dir==1?"nav-right":"nav-left",eventAction:get_title()})}}function get_title(){return wc.dom+":"+wc.category+":"+(wd.l_sort==null?wd.l_param:wd.l_sort)+":"+wd.l_title}function set_home_link(){switch(wc.category){case"finance":var url=wc.remn=="true"?"http://www.investkit.com/":"http://www.myinvestkit.com/"+wc.dom+"/";break;case"nba":var url=wc.remn=="true"?"http://www.hoopsloyal.com/NBA":"http://www.myhoopszone.com/"+wc.dom+"/NBA";break;case"college_basketball":var url=wc.remn=="true"?"http://www.hoopsloyal.com/NCAA":"http://www.myhoopszone.com/"+wc.dom+"/NCAA";break;default:var url=wc.remn=="true"?"http://www.joyfulhome.com/":"http://www.myhousekit.com/"+wc.dom+"/";break}document.getElementById("homelink").href=url}get_data();if(document.readyState=="complete"||document.readyState=="interactive"){set_home_link()}else if(document.addEventListener){document.addEventListener("DOMContentLoaded",set_home_link)}else if(document.attachEvent){document.attachEvent("onreadystatechange",function(){if(document.readyState==="complete"){set_home_link()}})}return{carousel:carousel,get_title:get_title}}();
