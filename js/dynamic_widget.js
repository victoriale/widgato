dynamic_widget=function(){var e='http://108.170.11.234:190/list_api.php',t=0,n={},a=JSON.parse(decodeURIComponent(location.search.substr(1))),o=0,i=['finance','nba','college_basketball','weather','crime','demographics','politics','disaster'],r=['finance','nba','college_basketball'];function l(){if(typeof a.category=='undefined'||i.indexOf(a.category)==-1){a.category='finance'}var t=typeof a.rand!='undefined'&&o==0?a.rand:Math.floor(Math.random()*10);var r;if(window.XMLHttpRequest){r=new XMLHttpRequest}else{r=new ActiveXObject('Microsoft.XMLHTTP')}r.onreadystatechange=function(){if(r.readyState==XMLHttpRequest.DONE){if(r.status==200){n=JSON.parse(r.responseText);if(document.readyState=='complete'||document.readyState=='interactive'){d()}else if(document.addEventListener){document.addEventListener('DOMContentLoaded',d)}else if(document.attachEvent){document.attachEvent('onreadystatechange',function(){if(document.readyState=='complete'){d()}})}}else{var e=r.statusText;if(r.status==500){try{e=JSON.parse(r.responseText).message}catch(t){console.log('No JSON message')}}e='HTTP Error ('+r.status+'): '+e;if(o++>10){throw e}setTimeout(l,500)}}};r.open('GET',e+'?partner='+(typeof a.dom!='undefined'?a.dom:'')+'&cat='+a.category+'&rand='+t,true);r.send()}function d(){if(typeof dataLayer!='undefined'){dataLayer.push({event:'widget-title',eventAction:dynamic_widget.get_title()})}if(a.category=='politics'){var e=n.l_title.indexOf('Republican')!=-1?'r':n.l_title.indexOf('Independent')!=-1?'i':'d';add_css_link('../css/dynamic_widget_politics_'+e+'.css')}document.getElementById('title').innerHTML=n.l_title;var t=true;switch(a.category){case'nba':var o=a.remn=='true'?'http://www.hoopsloyal.com/NBA/widget-list':'http://www.myhoopszone.com/'+a.dom+'/NBA/w-list';break;case'college_basketball':var o=a.remn=='true'?'http://www.hoopsloyal.com/NCAA/widget-list':'http://www.myhoopszone.com/'+a.dom+'/NCAA/w-list';break;case'finance':var o=a.remn=='true'?'http://www.investkit.com/widget-list':'http://www.myinvestkit.com/'+a.dom+'/w-list';break;default:var o=a.remn=='true'?'http://www.joyfulhome.com/widget-list':'http://www.myhousekit.com/'+a.dom+'/w-list';var t=false}o+=t?'?tw='+n.l_param+'&sw='+n.l_sort+'&input='+n.l_input:'/tw-'+n.l_param+'+sw-'+n.l_sort+'+input-'+n.l_input;document.getElementById('list-link').href=o;m()}function m(){var e=n.l_data[t];e.li_url=a.remn=='true'?e.li_primary_url:e.li_partner_url.replace('{partner}',a.dom);document.getElementById('line1').innerHTML=e.li_title;document.getElementById('line2').innerHTML=e.li_sub_txt;document.getElementById('desc').innerHTML=e.li_str;document.getElementById('line1').href=e.li_url;document.getElementById('mainimg').src='';document.getElementById('mainimg').src=e.li_img;document.getElementById('mainurl').href=e.li_url;document.getElementById('num').innerHTML='#'+e.li_rank;if(e.li_subimg!==false){var o=a.remn=='true'?e.li_subimg.primary_url:e.li_subimg.partner_url.replace('{partner}',a.dom);document.getElementById('subimg').src='';document.getElementById('subimg').src=e.li_subimg.img;document.getElementById('suburl').href=o;var i=document.getElementById('carousel');if(i.className.indexOf('two')==-1){i.className+=' two'}}}function c(e){t+=e;t=t>=n.l_data.length?0:t<0?n.l_data.length-1:t;m();if(typeof dataLayer!='undefined'){dataLayer.push({event:e==1?'nav-right':'nav-left',eventAction:s()})}}function s(){return a.dom+':'+a.category+':'+(n.l_sort==null?n.l_param:n.l_sort)+':'+n.l_title}function u(){switch(a.category){case'finance':var e=a.remn=='true'?'http://www.investkit.com/':'http://www.myinvestkit.com/'+a.dom+'/';break;case'nba':var e=a.remn=='true'?'http://www.hoopsloyal.com/NBA':'http://www.myhoopszone.com/'+a.dom+'/NBA';break;case'college_basketball':var e=a.remn=='true'?'http://www.hoopsloyal.com/NCAA':'http://www.myhoopszone.com/'+a.dom+'/NCAA';break;default:var e=a.remn=='true'?'http://www.joyfulhome.com/':'http://www.myhousekit.com/'+a.dom+'/';break}document.getElementById('homelink').href=e}if(r.indexOf(a.category)==-1&&a.remn!='true'){a.dom=a.dom.replace('.','-')}l();if(document.readyState=='complete'||document.readyState=='interactive'){u()}else if(document.addEventListener){document.addEventListener('DOMContentLoaded',u)}else if(document.attachEvent){document.attachEvent('onreadystatechange',function(){if(document.readyState==='complete'){u()}})}return{carousel:c,get_title:s}}();
