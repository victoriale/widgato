function getEnv(e){return e=null!=e.match(/localhost/g)||null!=e.match(/dev/g)?"dev":null!=e.match(/qa/g)?"qa":"prod"}function synapsysENV(e){return e=null!=e.match(/localhost/g)||null!=e.match(/dev/g)?"dev-":"qa"==e.match(/qa/g)?"qa-":""}function wideScript(){var e=$("dw_wide");(windowWidth=window.innerWidth)>widthBreakpoint&&null!=e&&(wideWidget=!0)}function setupEnvironment(e){apiCallUrl=protocolToUse;var a,t=e.dom,i=e.category,n=""==e.group?e.group=null:e.group,l=window.location.hostname.split(".")[0];a=null!=e.env?e.env?e.env:"prod":getEnv(l),imageUrl=protocolToUse+synapsysENV(l)+imageUrl,null!=e.group||"nfl"!=e.category&&"ncaaf"!=e.category&&"football"!=e.category&&"nflncaaf"!=e.category?(null!=e.group&&""!=e.group?apiCallUrl+=synapsysENV(l)+dwApi+"?group="+n:(subCategory=e.category,apiCallUrl+=synapsysENV(l)+dwApi+"?cat="+i),null!=t&&""!=t&&(apiCallUrl+="&partner="+t)):(subCategory=e.category,apiCallUrl+=a+"-"+tdlApi),fallBackApi=protocolToUse+synapsysENV(l)+dwApi+"?group=sports"}function updateList(e){if(currentIndex=0,null!=query.group||"nfl"!=query.category&&"ncaaf"!=query.category&&"football"!=query.category){listRand=Number(listRand)+Number(e);runAPI(apiCallUrl+"&rand="+listRand)}else getFootballList(query.category)}function getFootballList(e){if("nfl"==e)var a="../js/tdl_list_array.json";else if("ncaaf"==e)var a="../js/tdl_list_array_ncaaf.json";else if("nflncaaf"==e)if(rand=Math.floor(2*Math.random()+1),1==rand){var a="../js/tdl_list_array_ncaaf.json";l.category="ncaaf"}else{var a="../js/tdl_list_array.json";l.category="nfl"}var t=new XMLHttpRequest;t.onreadystatechange=function(){4===t.readyState&&200===t.status&&(jsonArray=JSON.parse(t.responseText),getRandFootballList(jsonArray))},t.open("GET",a,!0),t.send(null)}function getRandFootballList(e){rand=Math.floor(Math.random()*(e.length-1)+1);var a,t=new Date,i=new Date("09/15/"+t.getFullYear());a=t.getMonth()==i.getMonth()&&t.getDate()>=i.getDate()?e[rand]+"&season="+t.getFullYear():t.getMonth()>i.getMonth()?e[rand]+"&season="+t.getFullYear():e[rand]+"&season="+(t.getFullYear()-1),apiCallUrl+=a,runAPI(apiCallUrl)}function onLoad(e){"complete"==document.readyState||"interactive"==document.readyState?e():document.addEventListener?document.addEventListener("DOMContentLoaded",e):document.attachEvent&&document.attachEvent("onreadystatechange",function(){"complete"==document.readyState&&e()})}function runAPI(e){if(window.XMLHttpRequest)var a=new XMLHttpRequest;else var a=new ActiveXObject("Microsoft.XMLHTTP");a.onreadystatechange=function(){if(this.readyState==XMLHttpRequest.DONE)if(200==this.status)widgetData=JSON.parse(this.responseText),onLoad(displayWidget);else{var a=this.statusText;if(500==this.status)try{a=JSON.parse(this.responseText).message}catch(e){console.log("No JSON message")}if(a="HTTP Error ("+this.status+"): "+a,tries>maxTries-2&&(console.warn(a+" | hiding widget container | => SWAPPING TO FALLBACK"),e=fallBackApi+"&rand=1",apiCallUrl=fallBackApi),tries++>maxTries)throw document.getElementsByClassName("e_container")[0].style.display="none",a+" | hiding widget fallback failed container | => PLEASE CONTACT YOUR PROVIDER";setTimeout(runAPI(e),500)}},a.open("GET",e,!0),a.send()}function displayWidget(){try{if(null!=query.group||"football"!=query.category&&"nfl"!=query.category&&"ncaaf"!=query.category){var e=widgetData.l_data;null!=query.group&&null!=widgetData.category?subCategory=widgetData.category:null!=query.group&&null==widgetData.category&&(subCategory=null),setCategoryColors(subCategory),maxIndex=e.length;var a=e[currentIndex];$("profile-title").innerHTML=widgetData.l_title;var t;t=checkImage(null!=a.player_wide_img&&""!=a.player_wide_img?imageUrl+a.player_wide_img:null!=a.player_wide_img&&""!=a.player_wide_img||null==a.team_wide_img||""==a.team_wide_img?a.li_img:imageUrl+a.team_wide_img),null!=t&&($("mainimg").style.backgroundImage="url('"+t+"')"),$("mainimg").style.backgroundSize="finance"==subCategory?"auto 100%":"cover",$("mainimg").style.backgroundImage,"celebrities"==subCategory?($("profile-rank").innerHTML=a.li_rank,$("mainimg-rank").innerHTML=a.li_rank,$("profile-name").innerHTML=a.li_title,$("name-title").setAttribute("title",a.li_title),a.data_value_1?($("profile-datavalue1").innerHTML=a.data_value_1,$("profile-datapoint1").innerHTML=null!=a.data_point_1?a.data_point_1:"",$("data-title1").setAttribute("title",a.data_value_1)):($("profile-datavalue1").innerHTML=null!=a.fallback_data_value_1?a.fallback_data_value_1:"",$("profile-datapoint1").innerHTML=null!=a.fallback_data_point_1?a.fallback_data_point_1:"",$("data-title1").setAttribute("title",a.fallback_data_value_1)),$("profile-datapoint2").innerHTML=null!=a.data_point_2?a.data_point_2:"",$("profile-datavalue2").innerHTML=null!=a.data_value_2?" "+a.data_value_2:"",$("data-title2").setAttribute("title",a.data_value_2)):($("profile-rank").innerHTML=a.li_rank,$("mainimg-rank").innerHTML=a.li_rank,$("profile-name").innerHTML=a.li_title,$("profile-datavalue1").innerHTML=a.li_sub_txt,$("profile-datapoint2").innerHTML=a.li_tag,$("profile-datavalue2").innerHTML=" "+a.li_value,$("name-title").setAttribute("title",a.li_title),$("data-title1").setAttribute("title",a.li_sub_txt),$("data-title2").setAttribute("title",a.li_value+" "+a.li_tag))}else{var e=widgetData.data.listData;setCategoryColors(subCategory),maxIndex=e.length;var a=e[currentIndex];if($("profile-title").innerHTML=widgetData.data.listInfo.listName,$("profile-rank").innerHTML=a.rank,$("mainimg-rank").innerHTML=a.rank,"player"==a.rankType){var t=checkImage(imageUrl+a.playerHeadshotUrl);null!=t&&($("mainimg").style.backgroundImage="url('"+t+"')"),$("profile-name").innerHTML=a.playerFirstName+" "+a.playerLastName,$("profile-datapoint1").innerHTML="Team: ",$("profile-datavalue1").innerHTML=a.teamName,$("profile-datavalue2").innerHTML=Number(a.stat).toFixed(2),$("profile-datapoint2").innerHTML=" "+a.statDescription,$("name-title").setAttribute("title",a.playerFirstName+" "+a.playerLastName),$("data-title1").setAttribute("title","Team: "+a.teamName),$("data-title2").setAttribute("title",Number(a.stat).toFixed(2)+" "+a.statDescription)}else{var t=checkImage(imageUrl+a.teamLogo);null!=t&&($("mainimg").style.backgroundImage="url('"+t+"')"),$("profile-name").innerHTML=a.teamName,$("profile-datapoint1").innerHTML="Division: ",$("profile-datavalue1").innerHTML=a.divisionName,$("profile-datavalue2").innerHTML=Number(a.stat).toFixed(2),$("profile-datapoint2").innerHTML=": "+a.statDescription,$("name-title").setAttribute("title",a.teamName),$("data-title1").setAttribute("title","Division: "+a.divisionName),$("data-title2").setAttribute("title",Number(a.stat).toFixed(2)+": "+a.statDescription)}}}catch(e){console.log("Error in displaying widget Data")}}function setCategoryColors(e){switch(e){case"football":case"nfl":case"ncaaf":case"nflncaaf":e="football";break;case"basketball":case"nba":case"ncaam":case"college_basketball":e="basketball";break;case"baseball":case"mlb":e="baseball";break;case"realestate":case"disaster":case"demographics":case"crime":case"weather":case"politics":e="realestate";break;case"finance":case"money":e="finance";break;case"entertainment":case"celebrities":case"actor":case"musician":case"director":e="entertainment";break;default:e="default"}document.getElementsByClassName("widget_ad")[0].id=wideWidget?e+"-wide":e}function updateIndex(e){currentIndex+=e,currentIndex<0?currentIndex=maxIndex-1:currentIndex>=maxIndex&&(currentIndex=0),displayWidget()}function dateFormat(e,a,t,i){return{weekday:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e],day:a,month:["January","February","March","April","May","June","July","August","September","October","November","December"][t],year:i}}function checkImage(e){var a,t,i,n=wideWidget?690:300;switch(subCategory){case"football":case"nfl":case"ncaaf":case"nflncaaf":i="football_stock.jpg";break;case"basketball":case"nba":case"ncaam":case"college_basketball":i="basketball_stock.jpg";break;case"finance":i="finance_stock.jpg";break;case"mlb":i="baseball_stock.jpg";break;case"realestate":case"disaster":case"demographics":case"crime":case"weather":case"politics":i="real_estate_stock.jpg";break;case"celebrities":case"actor":case"musician":case"director":i="actor.jpg";break;default:i="failback.jpg"}null==e||-1!=e.indexOf("no-image")||-1!=e.indexOf("no_image")||-1!=e.indexOf("no_player")||-1!=e.indexOf("fallback")||-1!=window.location.pathname.indexOf("_970")||wideWidget?(t=!0,a="celebrities"==subCategory?imageUrl+"/01/fallback/stock/2017/04/"+i:imageUrl+"/01/fallback/stock/2017/03/"+i,a+="?width="+n*window.devicePixelRatio):(a=e+"?width="+n*window.devicePixelRatio,t=!1);for(var l=document.getElementsByClassName("e_image-cover"),r=0;r<l.length;r++)t?($("e_image-shader").style.display="none",l[r].style.display="block"):($("e_image-shader").style.display="block",l[r].style.display="none");return a}var protocolToUse="https:"==location.protocol?"https://":"http://",temp=location.search,query={},widthBreakpoint=649,wideWidget=!1,windowWidth,apiCallUrl,imageUrl="images.synapsys.us",dwApi="dw.synapsys.us/list_api.php",tdlApi="touchdownloyal-api.synapsys.us/list/",fallBackApi,href=window.top.location,currentIndex=0,maxIndex=1,widgetData,tries=0,maxTries=5,listRand=0,subCategory;document.addEventListener("DOMContentLoaded",function(e){null!=temp?(query=JSON.parse(decodeURIComponent(temp.substr(1))),listRand=query.rand?query.rand:1,setupEnvironment(query),wideScript(),updateList(0)):console.log("No query found on widget")});