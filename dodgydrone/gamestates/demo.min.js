var demo=function(e){},player,playerClickCooldown=0,platforms,topPlatforms,botPlatforms,playerDieing=!1,clouds,skylines,pigeons,score=0,highscore=0,skyline1,skyline2,sky,cursorOverPauseButton=!1,playerHasClickedYet=!1,emitter,gameStarting=!1,uiHeart1,scoreText,uiHeart2,uiHeart3,uiBackground,interfaceBackground,pauseBackground,pauseButton,playButton,featherIcon,help,hoverImage,clickToLiftButton,pigeonKillCount=0,pigeonHighKillCount=0,pigeonScoreText,pigeonsTillNextHeart=20,lives=3,obstacleCooldown=100;demo.prototype={create:function(){console.log("%cDemo Started.","color:white; background:red"),obstacleCooldown=100,sky=game.add.sprite(0,0,"sky"),clouds=game.add.group(),skylines=game.add.group(),platforms=game.add.group(),topPlatforms=game.add.group(),botPlatforms=game.add.group(),pigeons=game.add.group(),platforms.enableBody=!0,topPlatforms.enableBody=!0,botPlatforms.enableBody=!0,pigeons.enableBody=!0,clouds.enableBody=!0,skylines.enableBody=!0,skyline1=skylines.create(0,game.world.height-100,"sky-parralax"),skyline1.anchor.x=.5,skyline1.anchor.y=.5,skyline2=skylines.create(game.world.width,game.world.height-100,"sky-parralax"),skyline2.anchor.x=.5,skyline2.anchor.y=.5,this.createPlayer(),this.createInitialObstacles(),uiBackground=game.add.sprite(0,0,"ui-bg"),uiHeart1=game.add.sprite(5,5,"icon-heart"),uiHeart1.scale.setTo(.65,.65),uiHeart2=game.add.sprite(30,5,"icon-heart"),uiHeart2.scale.setTo(.65,.65),uiHeart3=game.add.sprite(55,5,"icon-heart"),uiHeart3.scale.setTo(.65,.65),help=game.add.sprite(150,30,"help"),help.anchor.setTo(.5,.5),help.scale.setTo(.8,.8),scoreText=game.add.text(game.world.width/2,16,score,{font:"bold 20px Lato",fill:"#44ad26"}),scoreText.anchor.setTo(.5,.5),this.setScore(0),featherIcon=game.add.sprite(game.world.width-10,3,"icon-feather"),featherIcon.scale.setTo(.65,.65),pigeonScoreText=game.add.text(game.world.width-18,16,pigeonKillCount,{font:"bold 20px Lato",fill:"#3879ba"}),pigeonScoreText.anchor.setTo(1,.5),interfaceBackground=game.add.sprite(0,game.world.height-50,"ui-bg"),interfaceBackground.scale.setTo(1,2),clickToLiftButton=game.add.button(5,game.world.height-45,"lift-button",this.clickToLiftButtonAction,this),pauseBackground=game.add.sprite(game.world.width/2,game.world.height/2,"ui-bg"),pauseBackground.anchor.setTo(.5,.5),pauseBackground.scale.setTo(1,15),pauseBackground.alpha=.5,pauseBackground.visible=!1,pauseButton=game.add.button(game.world.width-45,game.world.height-45,"pause-button",this.clickToPauseButtonAction,this),hoverImage=this.game.add.sprite(0,300,"hover"),hoverImage.inputEnabled=!0,hoverImage.events.onInputOver.add(this.gameCountDown,this),hoverIcon=game.add.sprite(35,300,"hover-icon"),hoverIcon.animations.add("play",[0,1,2,3],4,!0),hoverIcon.animations.play("play"),this.resetGameState(),gameStarting=!1},update:function(){if(game.physics.arcade.overlap(player,pigeons,this.collectpigeon,null,this),game.physics.arcade.overlap(player,topPlatforms,this.playerDeath,null,this),game.physics.arcade.overlap(player,botPlatforms,this.playerDeath,null,this),(player.body.position.y>=game.canvas.height-50||player.body.position.y<=20)&&this.playerDeath(player),this.aiClickCheck(),this.checkObstacles(),this.checkpigeons(),this.checkClouds(),this.checkSkylines(),this.timer){var e=this.formatTime(Math.round((this.timerEvent.delay-this.timer.ms)/1e3));e>0?this.countdown.setText(this.formatTime(Math.round((this.timerEvent.delay-this.timer.ms)/1e3))):(this.countdown.setText("Play!"),e>3&&this.countdown.setText("Ready?"))}},render:function(){},aiClickCheck:function(){!1===playerDieing&&(player.position.y>=250&&this.pushPlayerUp(!1),this.player=player,botPlatforms&&botPlatforms.forEach(function(e){e&&!0===e.alive&&e.body.position.y>190&&(game.physics.arcade.distanceBetween(this.player,e)<50&&e.body.position.x<=this.player.body.position.x+50&&this.pushPlayerUp(!0),game.physics.arcade.distanceBetween(this.player,e)<100&&e.body.position.x-50>this.player.body.position.x&&this.pushPlayerUp(!1))},this),player.body.velocity.y>=0&&!1===playerDieing&&player.animations.play("normal"),playerClickCooldown>0&&(playerClickCooldown-=1))},pushPlayerUp:function(e){(playerClickCooldown<=0||!0===e)&&(playerClickCooldown=50,e&&(playerClickCooldown=55),player.body.velocity.y=-300,player.animations.play("increase-height"))},resetGameState:function(){topPlatforms.forEachAlive(function(e){e.kill()}),botPlatforms.forEachAlive(function(e){e.kill()}),pigeons.forEachAlive(function(e){e.kill()}),clouds.forEachAlive(function(e){e.kill()}),skylines.forEachAlive(function(e){e.kill()}),pigeonKillCount=0,pigeonScoreText.text=pigeonKillCount,lives=3,playerClickCooldown=0,cursorOverPauseButton=!1,playerHasClickedYet=!1,playerDieing=!1,pigeonsTillNextHeart=20,obstacleCooldown=0,this.setScore(0),this.revivePlayer()},overPause:function(){},offPause:function(){},clickToLiftButtonAction:function(){},clickToPauseButtonAction:function(){},createCloud:function(e){cloud=clouds.create(game.world.width+100,game.rnd.integerInRange(0,game.world.height-150),"cloud"),cloud.anchor.x=.5,cloud.anchor.y=.5,cloud.body.gravity.y=0,cloud.body.gravity.x=game.rnd.integerInRange(-2,-10);var t=game.rnd.realInRange(.3,.9);cloud.scale.setTo(t,t)},checkClouds:function(){clouds.forEach(function(e){!0===e.alive&&e.body.position.x<-200&&e.reset(game.world.width+100,game.rnd.integerInRange(0,game.world.height))},this),clouds.countLiving()<8&&1===game.rnd.integerInRange(1,300)&&this.createCloud()},addScore:function(e){score+=e,score>highscore&&(highscore=score),scoreText.text=score},setScore:function(e){score=e,scoreText.text=score},playerDeathAnimationDone:function(e,t){var o;0===lives?(this.resetGameState(),uiHeart1=game.add.sprite(5,5,"icon-heart"),uiHeart1.scale.setTo(.65,.65),uiHeart2=game.add.sprite(30,5,"icon-heart"),uiHeart2.scale.setTo(.65,.65),uiHeart3=game.add.sprite(55,5,"icon-heart"),uiHeart3.scale.setTo(.65,.65)):(topPlatforms.forEach(function(e){e.kill()},this),botPlatforms.forEach(function(e){e.kill()},this),lives--,2===lives&&(uiHeart3.kill(),uiHeart3=game.add.sprite(55,5,"icon-heart-empty"),uiHeart3.scale.setTo(.65,.65),o=55),1===lives&&(uiHeart2.kill(),uiHeart2=game.add.sprite(30,5,"icon-heart-empty"),uiHeart2.scale.setTo(.65,.65),o=30),0===lives&&(uiHeart1.kill(),uiHeart1=game.add.sprite(5,5,"icon-heart-empty"),uiHeart1.scale.setTo(.65,.65),o=5),emitter=game.add.emitter(o,5,1),emitter.makeParticles("icon-heart"),emitter.maxParticleScale=.65,emitter.minParticleScale=.65,emitter.minParticleAlpha=.7,emitter.maxParticleAlpha=.7,emitter.start(!0,6e3,null,1),playerDieing=!1,this.revivePlayer())},createPlayer:function(){player=game.add.sprite(20,215,"player"),player.animations.add("normal",[2],10,!0),player.animations.add("increase-height",[1,0],10,!1),player.animations.add("death",[3,4,5],10,!0).onComplete.add(this.playerDeathAnimationDone,this),player.animations.play("normal"),player.scale.setTo(.35,.35),game.physics.arcade.enable(player),player.body.setSize(100,25,10,35),playerHasClickedYet=!1,player.body.bounce.y=0,player.body.collideWorldBounds=!0},revivePlayer:function(){playerHasClickedYet=!1,player.body.moves=!0,player.body.gravity.y=600,player.reset(20,150)},playerDeath:function(e){e.body.moves=!1,playerDieing=!0,e.animations.play("death",10,!1,!1)},createInitialObstacles:function(){var e=botPlatforms.create(game.world.width,0,"obstacle-bottom-1");e.width=70,e.height=195,e.body.immovable=!0,e.ltype="bottom",e.kill(),e=botPlatforms.create(game.world.width,0,"obstacle-bottom-2"),e.body.setSize(130,300,0,55),e.width=70,e.height=195,e.body.immovable=!0,e.ltype="bottom",e.kill(),e=botPlatforms.create(game.world.width,0,"obstacle-bottom-3"),e.width=70,e.height=195,e.body.immovable=!0,e.ltype="bottom",e.kill(),e=botPlatforms.create(game.world.width,0,"obstacle-bottom-4"),e.width=70,e.height=195,e.body.immovable=!0,e.ltype="bottom",e.kill(),e=botPlatforms.create(game.world.width,0,"obstacle-bottom-5"),e.width=70,e.height=195,e.body.immovable=!0,e.ltype="bottom",e.kill();e=topPlatforms.create(game.world.width,0,"obstacle-top-1"),e.width=70,e.height=195,e.body.immovable=!0,e.ltype="top",e.kill(),e=topPlatforms.create(game.world.width,0,"obstacle-top-2"),e.width=70,e.height=195,e.body.immovable=!0,e.ltype="top",e.kill(),e=topPlatforms.create(game.world.width,0,"obstacle-top-3"),e.body.setSize(130,350,0,0),e.width=70,e.height=195,e.body.immovable=!0,e.ltype="top",e.kill(),e=topPlatforms.create(game.world.width,0,"obstacle-top-4"),e.width=70,e.height=195,e.body.immovable=!0,e.ltype="top",e.kill(),e=topPlatforms.create(game.world.width,0,"obstacle-top-5"),e.width=70,e.height=195,e.body.immovable=!0,e.ltype="top",e.kill()},spawnObstacles:function(){obstacleCooldown=100;var e=game.rnd.integerInRange(165,175),t=game.rnd.integerInRange(0,100);topPlatforms.countLiving()+botPlatforms.countLiving()<2&&(t=20),topLedge=this.getRandomTop(),topLedge&&topLedge.reset(game.world.width,game.world.height/2-e/2-t-90-40),botLedge=this.getRandomBot(),botLedge&&botLedge.reset(game.world.width,game.world.height/2+e/2-t+35-40)},getRandomTop:function(){for(var e=topPlatforms.getRandom(0,4);!0===e.alive;)e=topPlatforms.getRandom(0,4);return e},getRandomBot:function(){for(var e=botPlatforms.getRandom(0,4);!0===e.alive;)e=botPlatforms.getRandom(0,4);return e},checkObstacles:function(){topPlatforms.forEachAlive(function(e){e.body.position.x-=2,e.body.position.x<-1*e.width&&(e.kill(),this.addScore(5))},this),botPlatforms.forEachAlive(function(e){e.body.position.x-=2,e.body.position.x<-1*e.width&&(e.kill(),this.addScore(5))},this),botPlatforms.countLiving()+topPlatforms.countLiving()<4&&obstacleCooldown<=0&&this.spawnObstacles(),obstacleCooldown>0&&(obstacleCooldown-=1)},checkSkylines:function(){skyline1.x-=1,skyline2.x-=1,skyline1.x<skyline1.width/2*-1&&skyline1.reset(game.world.width+skyline1.width/2,game.world.height-100),skyline2.x<skyline2.width/2*-1&&skyline2.reset(game.world.width+skyline2.width/2,game.world.height-100)},createpigeons:function(e){for(var t=0;t<e;t++){var o=pigeons.create(300,game.rnd.integerInRange(50,game.world.width),"pigeon");o.checkWorldBounds=!0,o.events.onOutOfBounds.add(this.pigeonOutOfBounds,this),o.isExploding=!1,o.scale.setTo(.35,.35),o.body.setSize(75,75,25,25),o.body.gravity.y=300,o.body.velocity.y=-150,o.body.velocity.x=game.rnd.integerInRange(-100,-50),o.animations.add("fly",[0,1,2],10,!0);o.animations.add("explode",[3,4,5],10,!1).onComplete.add(this.pigeonDeathComplete,this),o.animations.play("fly")}},pigeonOutOfBounds:function(e){e.kill(),e.position.x=320},checkpigeons:function(){if(pigeons.forEachAlive(function(e){if(!1===e.isExploding){e.body.position.x-=2;1===game.rnd.integerInRange(1,25)&&(e.body.velocity.y=-150)}},this),1===game.rnd.integerInRange(1,75))if(pigeons.countDead()+pigeons.countLiving()<6)this.createpigeons(1);else{var e=pigeons.getFirstDead();e&&(e.reset(300,game.rnd.integerInRange(50,200)),e.body.moves=!0,e.body.gravity.y=300,e.body.velocity.y=-150,e.body.velocity.x=game.rnd.integerInRange(-100,-50),e.animations.play("fly"))}},collectpigeon:function(e,t){!1===t.isExploding&&(t.isExploding=!0,t.body.moves=!1,t.animations.play("explode",15,!1,!1),emitter=game.add.emitter(t.centerX,t.centerY,5),emitter.makeParticles("icon-feather"),emitter.maxParticleScale=.3,emitter.minParticleScale=.2,emitter.start(!0,8e3,null,5))},pigeonDeathComplete:function(e,t){pigeonKillCount++,pigeonsTillNextHeart--,pigeonKillCount>pigeonHighKillCount&&(pigeonHighKillCount=pigeonKillCount),pigeonScoreText.text=pigeonKillCount,e.kill(),e.body.moves=!0,e.isExploding=!1,e.position.x=320,this.addScore(10),0===pigeonsTillNextHeart&&(pigeonsTillNextHeart=20,lives<3&&(2===lives&&(uiHeart3.kill(),uiHeart3=game.add.sprite(55,5,"icon-heart"),uiHeart3.scale.setTo(.65,.65)),1===lives&&(uiHeart2.kill(),uiHeart2=game.add.sprite(30,5,"icon-heart"),uiHeart2.scale.setTo(.65,.65)),0===lives&&(uiHeart1.kill(),uiHeart1=game.add.sprite(5,5,"icon-heart"),uiHeart1.scale.setTo(.65,.65)),lives++))},gameCountDown:function(){!1===gameStarting&&(hoverImage.kill(),hoverIcon.kill(),gameStarting=!0,this.interfaceBackground=game.add.sprite(game.world.width/2,game.world.height/2,"ui-bg"),this.interfaceBackground.anchor.setTo(.5,.5),this.interfaceBackground.scale.setTo(1,15),this.interfaceBackground.alpha=.8,this.timer=game.time.create(),this.timerEvent=this.timer.add(2*Phaser.Timer.SECOND,this.playTheGame,this),this.countdown=game.add.text(150,175,this.formatTime(Math.round((this.timerEvent.delay-this.timer.ms)/1e3)),{font:"bold 128px Lato",fill:"#ffffff"}),this.countdown.anchor.setTo(.5,.5),this.countdown.style.font="bold 128px Lato",this.timer.start())},formatTime:function(e){return(""+(e-60*(""+Math.floor(e/60)))).substr(-2)},playTheGame:function(){this.interfaceBackground.kill(),this.game.state.start("GameLoop",!0),hoverImage.kill()}};