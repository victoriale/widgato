function createFriendlyIframe(){friendlyIframe=document.createElement("iframe"),friendlyIframe.className="twiframe",friendlyIframe.width="300",friendlyIframe.height=350,friendlyIframe.scrolling="no",friendlyIframe.style.overflow="hidden",friendlyIframe.name=currentScript.src,friendlyIframe.style.border="none",currentScript.parentNode.insertBefore(friendlyIframe,currentScript),friendlyIframeWindow=friendlyIframe.contentWindow,friendlyIframeWindow.document.open(),friendlyIframeWindow.document.write(htmlFile),friendlyIframeWindow.document.close(),"complete"==friendlyIframeWindow.document.readyState||"interactive"==friendlyIframeWindow.document.readyState?setupIframe():friendlyIframeWindow.document.onreadystatechange=function(){"complete"!=friendlyIframeWindow.document.readyState&&"interactive"!=friendlyIframeWindow.document.readyState||setupIframe()}}function setupIframe(){var e=currentScript.src.split("js?")[1],t=new RegExp(document.location.hostname);if(""!=e&&null!=e)try{query=JSON.parse(decodeURIComponent(e).replace(/'/g,'"'))}catch(e){console.log(e)}else(t.test("localhost")||t.test("w1.synapsys.us")||t.test("dev-w1.synapsys.us")||t.test("homestead.widgets"))&&null!=document.location.search&&""!=document.location.search&&(query=JSON.parse(decodeURIComponent(document.location.search.substr(1))));currentScript.src="about:blank";var n=friendlyIframeWindow.document.createElement("link");n.type="text/css",n.rel="stylesheet",null!=query.wide&&""!=query.wide?(friendlyIframe.width=friendlyIframe.parentNode.clientWidth-300,friendlyIframe.height="250",window.addEventListener("resize",function(){friendlyIframe.width=friendlyIframe.parentNode.clientWidth},!0),n.href="./min/wide_styles.min.css"):(friendlyIframe.width=300,n.href="./min/standard_styles.min.css"),friendlyIframeWindow.document.head.appendChild(n),$=function(e){return friendlyIframeWindow.document.getElementById(e)},setupEnvironment(query),triviaWidget()}function getEnv(e){return e=null!=e.match(/^localhost\./)||null!=e.match(/^dev\./)?"dev":null!=e.match(/^qa\./)?"qa":"prod"}function synapsysENV(e){return e=null!=e.match(/^localhost\./)||null!=e.match(/^dev\./)?"dev-":"qa."==e.match(/^qa\./)?"qa-":""}function setupEnvironment(e){query=e,apiCallUrl=protocolToUse+apiCallUrl;var t,n=e.category,i=""==e.group?e.group=null:e.group,a=window.location.hostname.split(".")[0];t=null!=e.env?e.env?e.env:"prod":getEnv(a),imageUrl=protocolToUse+synapsysENV(a)+imageUrl,log("category:    "+n,analyticsStyles),log("group:       "+i,analyticsStyles),log("environment: "+a,analyticsStyles),log("env:         "+t,analyticsStyles),apiCallUrl+=n&&""!=n?"?category="+n:"?category="+i,log("API:         "+apiCallUrl,analyticsStyles)}function log(e,t){t||(t=defaultStyle)}function widgetSetup(){1!=firstWidgetRun||"complete"!=document.readyState&&"interactive"!=document.readyState?document.onreadystatechange=function(){1!=firstWidgetRun||"complete"!=document.readyState&&"interactive"!=document.readyState||(firstWidgetRun=!1,createFriendlyIframe())}:(firstWidgetRun=!1,createFriendlyIframe())}window.top.onbeforeunload=function(e){updatePayload(!0),console.log("window onbeforeunload post sent")};var htmlFile="<!Doctype html><html><head><title>Trivia Widget</title><meta name='viewport' content='initial-scale=1'><link rel='shortcut icon' href=''><meta charset='UTF-8'><meta name='theme-color' content='#2d3e50 '><meta http-equiv='Content-Language' content='en'></head><body><section class='widget_container' id='snt_trivia_game'><div id='completed_overlay' class='hidden'><div class='results_container'><p class='comment heavy' id='score_comment'></p><div class='score_container'><div class='icon'><img class='check_mark' src='./images/icon-check-mark-blue.svg' alt='check mark icon'></div><div class='score'><p>You Got</p><p class='results'><span id='user_score' class='heavy'></span> <span>/</span> <span id='total_questions'></span></p></div><p class='restart light' id='restart' onclick='restartFn()'><i aria-hidden='true'></i> <span class='try_again'>Try Again</span></p></div></div><div class='other_content_container'><span class='other_content_title light'>Other Celebrity Trivia You May Love:</span><ul class='other_content_options_container'><li class='other_content_option_container' id='' onclick='getNewDataSet(this.id)'><div class='animation_container'><div class='animation_container-box'><p>{CATEGORY}</p><p>TRIVIA</p></div></div></li><li class='other_content_option_container' id='' onclick='getNewDataSet(this.id)'><div class='animation_container'><div class='animation_container-box'><p>{CATEGORY}</p><p>TRIVIA</p></div></div></li><li class='other_content_option_container' id='' onclick='getNewDataSet(this.id)'><div class='animation_container'><div class='animation_container-box'><p>{CATEGORY}</p><p>TRIVIA</p></div></div></li><li class='other_content_option_container random_option hidden' id='' onclick='getNewDataSet(this.id)'><div class='animation_container'><i class='fa fa-random blue' aria-hidden='true'></i><div class='animation_container-box'><p>RANDOM</p><p>TRIVIA</p></div></div></li></ul></div></div><div id='trivia_container'><div id='interval_score_container'><span id='interval_score_question'></span> <span id='interval_score'></span></div><div id='submission_overlay'><div class='submission_display_container'><div class='submission_result_text_container'><div class='check_mark_container'><img class='check_mark' src='./images/icon-check-mark.svg' alt='check mark icon'> <img class='x' src='./images/icon-incorrect.svg' alt='incorrect icon'></div><p class='submission_display heavy'></p></div></div><div id='submission_overlay_image'></div></div><div class='trivia_image_container'><div id='progress_bar'></div><div class='trivia_image_overlay'><div class='trivia_image' id='pixelateContainer'><div class='trivia_image_background'></div></div></div><div class='trivia_question'><p class='heavy'>In what year did Adele win a \"Grammy Album of the Year\" for the album 25?</p></div></div><div class='trivia_options_container'><ul class='trivia_options'></ul><div class='trivia_options_container_info'><div class='left'><p class='light'><span>Question</span> <span class='acive_question heavy' id='active_question'>1</span>/ <span class='total_questions'>5</span></p></div><div class='right'><p class='light blue' id='skip_question' onclick='skipQuestionFn()'><span>Skip Question</span> <i class='fa fa-arrow-right' aria-hidden='true'></i></p></div></div></div><div class='submission_info_container'><p class='submission_info heavy' id='correct_result_display'></p><div class='submission_analytics_container'><div class='submission_analytics_title_container'><p class='submission_analytics_title border heavy'><i class='fa fa-bar-chart ltblue' aria-hidden='true'></i> <span class='heavy'>Analytics</span></p></div><div class='results_charts_container results_left'><div class='chart_container'><div class='results_chart c100 small green'><div class=''><span class='results_chart_value heavy'></span><div class='slice'><div class='bar'></div><div class='fill'></div></div></div></div><div class='results_chart_label'><i class='fa fa-check green' aria-hidden='true'></i> <span>Correct</span></div></div><div class='chart_container'><div class='results_chart c100 small red'><div class=''><span class='results_chart_value heavy'></span><div class='slice'><div class='bar'></div><div class='fill'></div></div></div></div><div class='results_chart_label'><i class='fa fa-times red' aria-hidden='true'></i> <span>Incorrect</span></div></div></div><div class='results_charts_container results_right'><p class='results_charts_container_intro gray upperCase heavy'>How you stack up:</p><p id='percentage_of_guess'></p></div></div><div id='next_question' class='button'></div></div><div class='trivia_container_footer'><img class='logo' src='./images/snt_logo.svg' alt='SNT Media logo'><p>Powered by SNT Media, Inc.</p></div></div></section><link href='https://fonts.googleapis.com/css?family=Lato:300,400,900' rel='stylesheet'>\x3c!--<script src=\"./js/main.js\"><\/script>--\x3e\x3c!-- <script src=\"../analytics/payload_analytics.js\" async><\/script> --\x3e</body></html>",friendlyIframe,friendlyIframeWindow,$,protocolToUse="https:"==location.protocol?"https://":"http://",postUrl="https://dev-pa.synapsys.us/",apiCallUrl="dev-tw-api.synapsys.us/index.php",imageUrl,query,embedURL="trivia",currentScript=null!=document.currentScript&&-1!=document.currentScript.src.indexOf(embedURL)?document.currentScript:function(){for(var e=document.getElementsByTagName("script"),t=e.length-1;t>=0;t--)if(-1!=e[t].src.indexOf(embedURL))return e[t]}(),analyticsStyles=["background: linear-gradient(#2a9a13, #000000)","border: 1px solid #3E0E02","color: white","text-shadow: 0 1px 0 rgba(0, 0, 0, 0.3)","text-align: center","font-weight: bold"].join(";"),payloadStyles=["background: linear-gradient(#4e028a, #000000)","border: 1px solid #3E0E02","color: white","text-shadow: 0 1px 0 rgba(0, 0, 0, 0.3)","text-align: center","font-weight: bold"].join(";"),defaultStyle=["background: linear-gradient(#000000, #6e6e6e)","border: 1px solid #3E0E02","color: #1fc134","text-shadow: 0 1px 0 rgba(0, 0, 0, 0.3)","text-align: center","font-weight: bold"].join(";"),triviaWidget=function(){function t(){if(window.XMLHttpRequest)var e=new XMLHttpRequest;else var e=new ActiveXObject("Microsoft.XMLHTTP");console.log("1 ####### MAKE API CALL",apiCallUrl),e.onreadystatechange=function(){if(this.readyState==XMLHttpRequest.DONE)if(200==this.status)q=JSON.parse(this.responseText),W=q.quizzes;else{var e=this.statusText;if(500==this.status)try{e=JSON.parse(this.responseText).message}catch(e){console.log("No JSON message")}e="HTTP Error ("+this.status+"): "+e,console.log("RETURNING DUMMY DATA")}},e.open("GET",apiCallUrl,!1),e.send()}function n(){try{t(),console.log("API RETURNED",W),M(),C?console.log("CHOSEN KEY ",C):console.log("GET RANDOM KEY ",C),C=C||a(i())[0],console.log("2 ###### SET dataSetTitles",Ie),x=W.filter(function(e){if(e.sub_category_id===C)return e})[0],console.log("3 ####### ACTIVE QUIZ",C,x),A=s(x),_e=1,ge=!1,we=0,Se=0,te.innerHTML=Se,ee.innerHTML=_e,ne.innerHTML=Ne;for(var e=0;ae.length-1>e;e++)ae[e].id="quiz_"+(e+1);c()}catch(e){console.warn("Data Error for Trivia",e)}}function i(){var e=W;return Ie=[],e.forEach(function(e){Ie.push(e.sub_category_id)}),Ie}function a(e){var t=[];if(Array.isArray(e))t=e;else for(var n in e)t.push(e[n]);for(var i=t.length-1;i>0;i--){var a=Math.floor(Math.random()*(i+1)),s=t[i];t[i]=t[a],t[a]=s}if(Array.isArray(e))return t;for(var o={},i=0;i<t.length;i++)o[i+1]=t[i];return o}function s(e){var t=e.questions;return A=[],t.forEach(function(e,t){A.push(e.metadata.question_id)}),Ne=10*A.length,A}function o(){de.id=r()}function r(){var e=(Ie.indexOf(C),Ie.filter(function(e){return e!==C}));return e[Math.floor(Math.random()*e.length)]}function l(e){e.offsetHeight>34&&(e.style.fontSize="10px",e.style.lineHeight="1.1")}function c(){try{Q.innerHTML="",F.className="",Z.innerHTML="<p>Next Question</p>",O=O||a(A)[0];var e=x.questions.filter(function(e){if(e.metadata.question_id===O)return e})[0];console.log("4 ####### CHOOSING Question",O,e);var t=e.metadata,n=e.answers,i=(e.analytics,e?t.correct_answer_result:"Whoops!"),s=e?"url("+ye+t.image+")":"";z.innerHTML=t.question,re.innerHTML=i,X.style.backgroundImage=s,H=a(n),pe.style.display="block",ue.style.display="block",J.classList.remove("no_transition"),n=H;for(var o in n)if(n.hasOwnProperty(o)){var r,c=(Number(Object.keys(n).indexOf(o)),friendlyIframeWindow.document.createElement("li")),u=n[o],v=n[o]==t.correct_answer;c.setAttribute("class","button"),c.innerHTML="<p>"+u+"</p>",Q.appendChild(c),l(c.getElementsByTagName("p")[0]),console.log(u,v),c.onclick=v?function(){r=this.getElementsByTagName("p")[0].innerHTML,m("correct"),d(e,r,v)}:function(){r=this.getElementsByTagName("p")[0].innerHTML,m("incorrect"),d(e,r,v)}}for(var f=0;se.length>f;f++){var p=W?"url("+ye+W[f].thumbnail+")":"";be.push(p),se[f].style.backgroundImage=p}b()}catch(e){console.warn("Error in setting trivia data",e)}}function d(e,t,n){log("setGraphInfo",analyticsStyles),log(n+" : "+t,payloadStyles),U=u(B,j,R).value1,D=u(B,j,R).value2,console.log(e);for(var i=0;le.length>i;i++)switch(console.log(le[i]),i){case 0:ce[i].innerHTML=U+"%",le[i].children[0].className="p"+U;break;default:ce[i].innerHTML=D+"%",le[i].children[0].className="p"+D}var a=friendlyIframeWindow.document.getElementsByClassName("correct_submission").length>0?U:Math.floor(101*Math.random());fe.innerHTML="<b>"+a+"%</b> of people also answered:<br> <b>"+t+".</b>"}function u(e,t,n){var i=Math.round(e/n*100)>100?100:Math.round(e/n*100);return{value1:i,value2:100-i}}function m(e){switch(e){case"correct":Te=!0,v(),b("clear"),J.getElementsByTagName("p")[0].innerHTML="Correct",pe.style.display="none",ue.style.display="none",K.classList.remove("hidden"),F.className="correct_submission",f();break;case"incorrect":Te=!0,b("clear"),J.getElementsByTagName("p")[0].innerHTML="Incorrect",pe.style.display="none",ue.style.display="none",K.classList.remove("hidden"),F.className="incorrect_submission",f()}}function v(){Se+=Ee,te.innerHTML=Se}function f(){_e>=he?(Z.onclick=function(){p()},Z.innerHTML="<p>Show Results</p>"):Z.onclick=function(){K.classList.add("hidden"),g()},J.classList.add("no_transition")}function p(){var e;e=Se<10?"Ouch!":Se>=10&&Se<=20?"Not Bad!":"Great Job!",ie.innerHTML=e,oe.className="show",o()}function y(e){var t=A.indexOf(e);t>-1&&A.splice(t,1),A.length>0&&(O=A[0]?A[0]:null)}function g(){y(O),_e++,ee.innerHTML=_e,F.className="",_e<=he&&c()}function h(){n(),oe.className="hidden"}function _(){Ee=10}function w(e){_(),C=e,h()}function b(e){if("clear"==e)clearInterval(P),_();else{var t=0,n=0,i=1;P=setInterval(function(){if(i++,n=Math.floor(i/10),ue.style.width=i+"%",n>=0&&n<10&&t!=n&&(t=n,Ee--),me.innerHTML="Q"+_e+" - Points : "+Ee,(10===n||100===i)&&(clearInterval(P),!Te)){w(r())}},100)}}function I(t){try{switch(t){case"view":return ke.utils.elementIsVisible(Y,null,!1,.5);case"useragent":return log("BROWSER    =   "+ke.browser.name),log("MOBILE     =   "+ke.browser.mobile),ke.browser;default:console.warn("igloo Utility not found",e)}}catch(e){console.warn("igloo not found",e)}}function T(e){log("Create Payload",payloadStyles);var t,n=document.createElement("iframe"),i="snt_payload_id_"+G;n.setAttribute("id",i),n.className="report",n.width=1,n.height=1,n.scrolling="no",n.style.overflow="hidden",n.src="about:blank",n.style.border="none",friendlyIframe.parentNode.insertBefore(n,friendlyIframe),t=n.contentWindow,t.document.open(),t.document.write('<script type="text/javascript">'+E(postUrl,e)+" <\/script>"),t.document.close();var a=document.getElementById(i);"function"==typeof a.remove?a.remove():a.outerHTML=""}function E(e,t){try{if("object"==typeof t){window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");for(var n in t)log(n+"   :     "+t[n]);log("SENT PAYLOAD",payloadStyles)}}catch(e){console.warn("Product Analytics Error in Post Request",e)}}function S(e){try{if(jsonObject={si:"3tdt63r",pa:query.event.p,pl:query.event.z,qz:"yu987fyusr",qi:"9087uiucnse",ac:"0",w1:"0",w2:"0",w3:"0",sp:"0",ed:123,vd:53,cl:Ce||0,mo:We.mobile,eb:2},"send"==e)T(jsonObject),jsonObject={};else{log("UPDATING PAYLOAD vvvvvvvvvv",payloadStyles);for(var t in jsonObject)log(t+"   :     "+jsonObject[t]);log("UPDATING PAYLOAD ^^^^^^^^^^",payloadStyles)}}catch(e){console.log("%cerror updating payload                                                     ","background: linear-gradient(#7a0000, #000000); border: 1px solid #3E0E02; color: white"),console.warn(e)}}function N(e,t,n,i){this.name=e,this.time=0,this.stopAt=n,this.intervalTimer=function(){},this.start=function(){var e=this;this.intervalTimer=setInterval(function(){e.time+=t,e.stopAt&&e.time>=e.stopAt&&e.stop(),i&&(i.innerHTML=e.time)},t)},this.stop=function(){clearInterval(this.intervalTimer)},this.getTime=function(){return this.time}}function M(){L(),log("Data Found -- STARTING initial Analytics",analyticsStyles),log("IGLOO check browser && user agent --vvvvvvvvvvv--",payloadStyles),We=I("useragent"),log("IGLOO Initial View check ---vvv---",payloadStyles),view=I("view"),log("view       =   "+view),log("IGLOO View Listening... ---vvv---",payloadStyles),window.onscroll=function(){view=I("view")},log("START TIMERS widget loaded in view",payloadStyles);var e=window.top.friendlyIframeWindow.document;e.getElementById("viewTest")?qe=e.getElementById("viewTest"):(qe=e.createElement("div"),qe.id="viewTest",qe.style.position="fixed",qe.style.top="0",qe.style.right="0",e.body.insertBefore(qe,e.body.firstElementChild)),e.getElementById("dwewllTest")?xe=e.getElementById("dwewllTest"):(xe=e.createElement("div"),xe.id="dwewllTest",xe.style.position="fixed",xe.style.top="0",xe.style.left="0",e.body.insertBefore(xe,e.body.firstElementChild)),Me=new N("view",100,null,qe),Le=new N("dwell",1e3,null,xe),Me.start(),Le.start(),Y.onclick=function(){Ce++,log("total_clicks      =   "+Ce)},log("Create MouseOver Interaction - Listening...",payloadStyles),Y.onmouseover=function(){Te||(log("UpdateAnalytics",analyticsStyles),b("clear"),b(),Te=!0,log("widgetEngaged  =   "+Te),S(),log("END UpdateAnalytics",analyticsStyles))},S("send"),log("END initial Analytics",analyticsStyles)}function L(){Me&&(Me.stop(),Me=null),Le&&(Le.stop(),Le=null)}function k(){window.top.igloo?(ke=window.top.igloo,n(),clearInterval(Ae)):console.log("igloo not found",window.top.igloo)}window.onload=function(){V.style.display="block"};var W,A,q,x,C,O,H,R,B,U,j,D,P,G=Math.floor(1e3*Math.random()),Y=$("snt_trivia_game"),V=friendlyIframeWindow.document.getElementsByClassName("widget_container")[0],F=$("trivia_container"),X=friendlyIframeWindow.document.getElementsByClassName("trivia_image")[0],z=(friendlyIframeWindow.document.getElementsByClassName("trivia_image_overlay")[0],friendlyIframeWindow.document.getElementsByClassName("trivia_question")[0].getElementsByTagName("p")[0]),Q=friendlyIframeWindow.document.getElementsByClassName("trivia_options")[0],J=(friendlyIframeWindow.document.getElementsByClassName("trivia_options")[0].getElementsByTagName("li"),$("submission_overlay")),K=friendlyIframeWindow.document.getElementsByClassName("submission_display_container")[0],Z=$("next_question"),ee=$("active_question"),te=$("user_score"),ne=$("total_questions"),ie=$("score_comment"),ae=($("skip_question"),friendlyIframeWindow.document.getElementsByClassName("other_content_option_container")),se=friendlyIframeWindow.document.getElementsByClassName("animation_container"),oe=$("completed_overlay"),re=$("correct_result_display"),le=friendlyIframeWindow.document.getElementsByClassName("results_chart"),ce=friendlyIframeWindow.document.getElementsByClassName("results_chart_value"),de=friendlyIframeWindow.document.getElementsByClassName("random_option")[0],ue=$("progress_bar"),me=($("interval_score"),$("interval_score_question")),ve=$("pixelateContainer"),fe=$("percentage_of_guess"),pe=$("interval_score_container"),ye=(ve.offsetHeight,ve.offsetWidth,"./images/"),ge=(window.location.href,!1),he=5,_e=1,we=0,be=[],Ie=[],Te=!1,Ee=10,Se=0,Ne=50;window.top.onbeforeunload=function(e){S("send"),console.log("window onbeforeunload post sent")};var Me,Le,ke,We,Ae,qe,xe,Ce=0,Oe=!0;1!=Oe||"complete"!=friendlyIframeWindow.document.readyState&&"interactive"!=friendlyIframeWindow.document.readyState?friendlyIframeWindow.document.onreadystatechange=function(){1!=Oe||"complete"!=friendlyIframeWindow.document.readyState&&"interactive"!=friendlyIframeWindow.document.readyState||(Oe=!1,Ae=setInterval(k,100))}:(Oe=!1,Ae=setInterval(k,100))},firstWidgetRun=!0;widgetSetup();