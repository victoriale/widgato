function createFriendlyIframe(){friendlyIframe=document.createElement("iframe"),friendlyIframe.className="twiframe",friendlyIframe.width="300",friendlyIframe.height=350,friendlyIframe.scrolling="no",friendlyIframe.style.overflow="hidden",friendlyIframe.name=currentScript.src,friendlyIframe.style.border="none",currentScript.parentNode.insertBefore(friendlyIframe,currentScript),friendlyIframeWindow=friendlyIframe.contentWindow,friendlyIframeWindow.document.open(),friendlyIframeWindow.document.write(htmlFile),friendlyIframeWindow.document.close(),"complete"==friendlyIframeWindow.document.readyState||"interactive"==friendlyIframeWindow.document.readyState?setupIframe():friendlyIframeWindow.document.onreadystatechange=function(){"complete"!=friendlyIframeWindow.document.readyState&&"interactive"!=friendlyIframeWindow.document.readyState||setupIframe()}}function setupIframe(){var e=currentScript.src.split("js?")[1],t=new RegExp(document.location.hostname);if(""!=e&&null!=e)try{query=JSON.parse(decodeURIComponent(e).replace(/'/g,'"'))}catch(e){console.log(e)}else(t.test("localhost")||t.test("w1.synapsys.us")||t.test("dev-w1.synapsys.us")||t.test("homestead.widgets"))&&null!=document.location.search&&""!=document.location.search&&(query=JSON.parse(decodeURIComponent(document.location.search.substr(1))));currentScript.src="about:blank";var n=friendlyIframeWindow.document.createElement("link");n.type="text/css",n.rel="stylesheet",null!=query.wide&&""!=query.wide?(friendlyIframe.width=friendlyIframe.parentNode.clientWidth-300,friendlyIframe.height="250",window.addEventListener("resize",function(){friendlyIframe.width=friendlyIframe.parentNode.clientWidth},!0),n.href="./min/wide_styles.min.css"):(friendlyIframe.width=300,n.href="./min/standard_styles.min.css"),friendlyIframeWindow.document.head.appendChild(n),$=function(e){return friendlyIframeWindow.document.getElementById(e)},setupEnvironment(query),triviaWidget()}function getEnv(e){return e=null!=e.match(/^localhost\./)||null!=e.match(/^dev\./)?"dev":null!=e.match(/^qa\./)?"qa":"prod"}function synapsysENV(e){return e=null!=e.match(/^localhost\./)||null!=e.match(/^dev\./)?"dev-":"qa."==e.match(/^qa\./)?"qa-":""}function setupEnvironment(e){query=e,apiCallUrl=protocolToUse+apiCallUrl;var t,n=e.category,i=""==e.group?e.group=null:e.group,a=window.location.hostname.split(".")[0];t=null!=e.env?e.env?e.env:"prod":getEnv(a),imageUrl=protocolToUse+synapsysENV(a)+imageUrl,log("category:    "+n,analyticsStyles),log("group:       "+i,analyticsStyles),log("environment: "+a,analyticsStyles),log("env:         "+t,analyticsStyles),apiCallUrl+=n&&""!=n?"?category="+n:"?category="+i,log("API:         "+apiCallUrl,analyticsStyles)}function log(e,t){t||(t=defaultStyle)}function widgetSetup(){1!=firstWidgetRun||"complete"!=document.readyState&&"interactive"!=document.readyState?document.onreadystatechange=function(){1!=firstWidgetRun||"complete"!=document.readyState&&"interactive"!=document.readyState||(firstWidgetRun=!1,createFriendlyIframe())}:(firstWidgetRun=!1,createFriendlyIframe())}window.top.onbeforeunload=function(e){updatePayload(!0),console.log("window onbeforeunload post sent")};var htmlFile="<!Doctype html><html><head><title>Trivia Widget</title><meta name='viewport' content='initial-scale=1'><link rel='shortcut icon' href=''><meta charset='UTF-8'><meta name='theme-color' content='#2d3e50 '><meta http-equiv='Content-Language' content='en'></head><body><section class='widget_container' id='snt_trivia_game'><div id='completed_overlay' class='hidden'><div class='results_container'><p class='comment heavy' id='score_comment'></p><div class='score_container'><div class='icon'><img class='check_mark' src='./images/icon-check-mark-blue.svg' alt='check mark icon'></div><div class='score'><p>You Got</p><p class='results'><span id='user_score' class='heavy'></span> <span>/</span> <span id='total_questions'></span></p></div><p class='restart light' id='restart' onclick='restartFn()'><i aria-hidden='true'></i> <span class='try_again'>Try Again</span></p></div></div><div class='other_content_container'><span class='other_content_title light'>Other Celebrity Trivia You May Love:</span><ul class='other_content_options_container'><li class='other_content_option_container' id='' onclick='getNewDataSet(this.id)'><div class='animation_container'><div class='animation_container-box'><p>{CATEGORY}</p><p>TRIVIA</p></div></div></li><li class='other_content_option_container' id='' onclick='getNewDataSet(this.id)'><div class='animation_container'><div class='animation_container-box'><p>{CATEGORY}</p><p>TRIVIA</p></div></div></li><li class='other_content_option_container' id='' onclick='getNewDataSet(this.id)'><div class='animation_container'><div class='animation_container-box'><p>{CATEGORY}</p><p>TRIVIA</p></div></div></li><li class='other_content_option_container random_option hidden' id='' onclick='getNewDataSet(this.id)'><div class='animation_container'><i class='fa fa-random blue' aria-hidden='true'></i><div class='animation_container-box'><p>RANDOM</p><p>TRIVIA</p></div></div></li></ul></div></div><div id='trivia_container'><div id='interval_score_container'><span id='interval_score_question'></span> <span id='interval_score'></span></div><div id='submission_overlay'><div class='submission_display_container'><div class='submission_result_text_container'><div class='check_mark_container'><img class='check_mark' src='./images/icon-check-mark.svg' alt='check mark icon'> <img class='x' src='./images/icon-incorrect.svg' alt='incorrect icon'></div><p class='submission_display heavy'></p></div></div><div id='submission_overlay_image'></div></div><div class='trivia_image_container'><div id='progress_bar'></div><div class='trivia_image_overlay'><div class='trivia_image' id='pixelateContainer'><div class='trivia_image_background'></div></div></div><div class='trivia_question'><p class='heavy'>In what year did Adele win a \"Grammy Album of the Year\" for the album 25?</p></div></div><div class='trivia_options_container'><ul class='trivia_options'></ul><div class='trivia_options_container_info'><div class='left'><p class='light'><span>Question</span> <span class='acive_question heavy' id='active_question'>1</span>/ <span class='total_questions'>5</span></p></div><div class='right'><p class='light blue' id='skip_question' onclick='skipQuestionFn()'><span>Skip Question</span> <i class='fa fa-arrow-right' aria-hidden='true'></i></p></div></div></div><div class='submission_info_container'><p class='submission_info heavy' id='correct_result_display'></p><div class='submission_analytics_container'><div class='submission_analytics_title_container'><p class='submission_analytics_title border heavy'><i class='fa fa-bar-chart ltblue' aria-hidden='true'></i> <span class='heavy'>Analytics</span></p></div><div class='results_charts_container results_left'><div class='chart_container'><div class='results_chart c100 small green'><div class=''><span class='results_chart_value heavy'></span><div class='slice'><div class='bar'></div><div class='fill'></div></div></div></div><div class='results_chart_label'><i class='fa fa-check green' aria-hidden='true'></i> <span>Correct</span></div></div><div class='chart_container'><div class='results_chart c100 small red'><div class=''><span class='results_chart_value heavy'></span><div class='slice'><div class='bar'></div><div class='fill'></div></div></div></div><div class='results_chart_label'><i class='fa fa-times red' aria-hidden='true'></i> <span>Incorrect</span></div></div></div><div class='results_charts_container results_right'><p class='results_charts_container_intro gray upperCase heavy'>How you stack up:</p><p id='percentage_of_guess'></p></div></div><div id='next_question' class='button'></div></div><div class='trivia_container_footer'><img class='logo' src='./images/snt_logo.svg' alt='SNT Media logo'><p>Powered by SNT Media, Inc.</p></div></div></section><link href='https://fonts.googleapis.com/css?family=Lato:300,400,900' rel='stylesheet'>\x3c!--<script src=\"./js/main.js\"><\/script>--\x3e\x3c!-- <script src=\"../analytics/payload_analytics.js\" async><\/script> --\x3e</body></html>",friendlyIframe,friendlyIframeWindow,$,protocolToUse="https:"==location.protocol?"https://":"http://",postUrl="https://dev-pa.synapsys.us/",apiCallUrl="dev-tw-api.synapsys.us/index.php",imageUrl,query,embedURL="trivia",currentScript=null!=document.currentScript&&-1!=document.currentScript.src.indexOf(embedURL)?document.currentScript:function(){for(var e=document.getElementsByTagName("script"),t=e.length-1;t>=0;t--)if(-1!=e[t].src.indexOf(embedURL))return e[t]}(),analyticsStyles=["background: linear-gradient(#2a9a13, #000000)","border: 1px solid #3E0E02","color: white","text-shadow: 0 1px 0 rgba(0, 0, 0, 0.3)","text-align: center","font-weight: bold"].join(";"),payloadStyles=["background: linear-gradient(#4e028a, #000000)","border: 1px solid #3E0E02","color: white","text-shadow: 0 1px 0 rgba(0, 0, 0, 0.3)","text-align: center","font-weight: bold"].join(";"),defaultStyle=["background: linear-gradient(#000000, #6e6e6e)","border: 1px solid #3E0E02","color: #1fc134","text-shadow: 0 1px 0 rgba(0, 0, 0, 0.3)","text-align: center","font-weight: bold"].join(";"),triviaWidget=function(){function t(){if(window.XMLHttpRequest)var e=new XMLHttpRequest;else var e=new ActiveXObject("Microsoft.XMLHTTP");console.log("1 ####### MAKE API CALL",apiCallUrl),e.onreadystatechange=function(){if(this.readyState==XMLHttpRequest.DONE)if(200==this.status)A=JSON.parse(this.responseText),q=A.quizzes;else{var e=this.statusText;if(500==this.status)try{e=JSON.parse(this.responseText).message}catch(e){console.log("No JSON message")}e="HTTP Error ("+this.status+"): "+e,console.log("RETURNING DUMMY DATA")}},e.open("GET",apiCallUrl,!1),e.send()}function n(){try{t(),console.log("API RETURNED",q),N(),x?console.log("CHOSEN KEY ",x):console.log("GET RANDOM KEY ",x),x=x||a(i())[0],console.log("2 ###### SET quizTitles",he),W=q.filter(function(e){if(e.sub_category_id===x)return e})[0],Le=x,log("quizId:    "+Le,analyticsStyles),console.log("3 ####### ACTIVE QUIZ",x,W),M=o(W),pe=1,ve=!1,ye=0,Ie=0,J.innerHTML=Ie,X.innerHTML=pe,K.innerHTML=be;for(var e=0;ee.length-1>e;e++)ee[e].id="quiz_"+(e+1);r()}catch(e){console.warn("Data Error for Trivia",e)}}function i(){var e=q;return he=[],e.forEach(function(e){he.push(e.sub_category_id)}),he}function a(e){var t=[];if(Array.isArray(e))t=e;else for(var n in e)t.push(e[n]);for(var i=t.length-1;i>0;i--){var a=Math.floor(Math.random()*(i+1)),o=t[i];t[i]=t[a],t[a]=o}if(Array.isArray(e))return t;for(var s={},i=0;i<t.length;i++)s[i+1]=t[i];return s}function o(e){var t=e.questions;return M=[],t.forEach(function(e,t){M.push(e.metadata.question_id)}),be=10*M.length,M}function s(e){e.offsetHeight>34&&(e.style.fontSize="10px",e.style.lineHeight="1.1")}function r(){try{Y.innerHTML="",G.className="",F.innerHTML="<p>Next Question</p>",console.log("questionKey",O),O=O||a(M)[0];var e=W.questions.filter(function(e){if(e.metadata.question_id===O)return e})[0];ke=O,log("questionId:    "+ke,analyticsStyles),console.log("4 ####### CHOOSING Question",O,e);var t=e.metadata,n=e.answers,i=(e.analytics,e?t.correct_answer_result:"Whoops!"),o=e?"url("+me+t.image+")":"";Q.innerHTML=t.question,ie.innerHTML=i,P.style.backgroundImage=o,C=a(n),ue.style.display="block",re.style.display="block",V.classList.remove("no_transition"),n=C;for(var r in n)if(n.hasOwnProperty(r)){var d,u=(Number(Object.keys(n).indexOf(r)),friendlyIframeWindow.document.createElement("li")),m=n[r],v=n[r]==t.correct_answer;u.setAttribute("class","button"),u.innerHTML="<p>"+m+"</p>",Y.appendChild(u),s(u.getElementsByTagName("p")[0]),u.onclick=v?function(){d=this.getElementsByTagName("p")[0].innerHTML,c("correct"),l(e,d,v)}:function(){d=this.getElementsByTagName("p")[0].innerHTML,c("incorrect"),l(e,d,v)}}for(var f=0;te.length>f;f++){var p=q?"url("+me+q[f].thumbnail+")":"";ge.push(p),te[f].style.backgroundImage=p}g()}catch(e){console.warn("Error in setting trivia data",e)}}function l(e,t,n){console.log("%csetGraphInfo",analyticsStyles),console.log("%c"+n+" : "+t,payloadStyles);var i=(e.metadata,e.answers),a=e.analytics;R=a.correct_percentage,H=a.wrong_percentage,console.log("activeQuestion",e);for(var o=0;ae.length>o;o++)switch(console.log(ae[o]),o){case 0:oe[o].innerHTML=R+"%",ae[o].children[0].className="p"+R;break;default:oe[o].innerHTML=H+"%",ae[o].children[0].className="p"+H}for(var s in i)if(t==i[s]){var r=a[s+"_percentage"];de.innerHTML="<b>"+r+"%</b> of people also answered:<br> <b>"+t+".</b>"}}function c(e){switch(e){case"correct":_e=!0,d(),g("clear"),V.getElementsByTagName("p")[0].innerHTML="Correct",ue.style.display="none",re.style.display="none",z.classList.remove("hidden"),G.className="correct_submission",u();break;case"incorrect":_e=!0,g("clear"),V.getElementsByTagName("p")[0].innerHTML="Incorrect",ue.style.display="none",re.style.display="none",z.classList.remove("hidden"),G.className="incorrect_submission",u()}}function d(){console.log("5 ####### Current + IntervalScore",Ie,we),Ie+=we,J.innerHTML=Ie,console.log("NEW SCORE ",Ie)}function u(){pe>=fe?(F.onclick=function(){m()},F.innerHTML="<p>Show Results</p>"):F.onclick=function(){z.classList.add("hidden"),f()},V.classList.add("no_transition")}function m(){var e;e=Ie<10?"Ouch!":Ie>=10&&Ie<=20?"Not Bad!":"Great Job!",Z.innerHTML=e,ne.className="show",h()}function v(e){console.log("removeQuestionIndex() from dataQuestionTitles",M),console.log("removing questionKey",O);var t=M.indexOf(e);t>-1&&(M.splice(t,1),console.log("removed "+O,M)),M.length>0&&(O=M[0]?M[0]:null,console.log("New Key",O))}function f(){console.log("6 ####### iterateQuestion() REMOVING ",O),v(O),console.log("Questions Left",M),console.log("7 ####### iterate questionIterator for tooltip text"),pe++,X.innerHTML=pe,G.className="",pe<=fe&&(console.log("END NEW DATA SET"),r())}function p(){n(),ne.className="hidden"}function y(){we=10}function g(e){if("clear"==e)clearInterval(B),y();else{var t=0,n=0,i=1;B=setInterval(function(){if(i++,n=Math.floor(i/10),re.style.width=i+"%",n>=0&&n<10&&t!=n&&(t=n,we--),le.innerHTML="Q"+pe+" - Points : "+we,(10===n||100===i)&&(clearInterval(B),!_e)){w(_())}},100)}}function h(){se.id=_()}function _(){var e=(he.indexOf(x),he.filter(function(e){return e!==x})),t=e[Math.floor(Math.random()*e.length)];return O=null,t}function w(e){y(),x=e,p()}function I(t){try{switch(t){case"view":return Se.utils.elementIsVisible(j,null,!1,.5);case"useragent":return log("BROWSER    =   "+Se.browser.name),log("MOBILE     =   "+Se.browser.mobile),Se.browser;default:console.warn("igloo Utility not found",e)}}catch(e){console.warn("igloo not found",e)}}function b(e){log("Create Payload",payloadStyles);var t,n=document.createElement("iframe"),i="snt_payload_id_"+U;n.setAttribute("id",i),n.className="report",n.width=1,n.height=1,n.scrolling="no",n.style.overflow="hidden",n.src="about:blank",n.style.border="none",friendlyIframe.parentNode.insertBefore(n,friendlyIframe),t=n.contentWindow,t.document.open(),t.document.write('<script type="text/javascript">'+T(postUrl,e)+" <\/script>"),t.document.close();var a=document.getElementById(i);"function"==typeof a.remove?a.remove():a.outerHTML=""}function T(e,t){try{if("object"==typeof t){window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");for(var n in t)log(n+"   :     "+t[n]);log("SENT PAYLOAD",payloadStyles)}}catch(e){console.warn("Product Analytics Error in Post Request",e)}}function E(e){try{if(jsonObject={si:"3tdt63r",pa:query.event.p,pl:query.event.z,qz:"yu987fyusr",qi:"9087uiucnse",ac:"0",w1:"0",w2:"0",w3:"0",sp:"0",ed:123,vd:53,cl:We||0,mo:Ne.mobile,eb:2},"send"==e)b(jsonObject),jsonObject={};else{log("UPDATING PAYLOAD vvvvvvvvvv",payloadStyles);for(var t in jsonObject)log(t+"   :     "+jsonObject[t]);log("UPDATING PAYLOAD ^^^^^^^^^^",payloadStyles)}}catch(e){console.log("%cerror updating payload                                                     ","background: linear-gradient(#7a0000, #000000); border: 1px solid #3E0E02; color: white"),console.warn(e)}}function S(e,t,n,i){this.name=e,this.time=0,this.stopAt=n,this.intervalTimer=function(){},this.start=function(){var e=this;this.intervalTimer=setInterval(function(){e.time+=t,e.stopAt&&e.time>=e.stopAt&&e.stop(),i&&(i.innerHTML=e.time)},t)},this.stop=function(){clearInterval(this.intervalTimer)},this.getTime=function(){return this.time}}function N(){L(),log("Data Found -- STARTING initial Analytics",analyticsStyles),log("IGLOO check browser && user agent --vvvvvvvvvvv--",payloadStyles),Ne=I("useragent"),log("IGLOO Initial View check ---vvv---",payloadStyles),view=I("view"),log("view       =   "+view),log("IGLOO View Listening... ---vvv---",payloadStyles),window.onscroll=function(){view=I("view")},log("START TIMERS widget loaded in view",payloadStyles);var e=window.top.friendlyIframeWindow.document;e.getElementById("viewTest")?Me=e.getElementById("viewTest"):(Me=e.createElement("div"),Me.id="viewTest",Me.style.position="fixed",Me.style.top="0",Me.style.right="0",e.body.insertBefore(Me,e.body.firstElementChild)),e.getElementById("dwewllTest")?Ae=e.getElementById("dwewllTest"):(Ae=e.createElement("div"),Ae.id="dwewllTest",Ae.style.position="fixed",Ae.style.top="0",Ae.style.left="0",e.body.insertBefore(Ae,e.body.firstElementChild)),Te=new S("view",100,null,Me),Ee=new S("dwell",1e3,null,Ae),Te.start(),Ee.start(),j.onclick=function(){We++,log("total_clicks      =   "+We)},log("Create MouseOver Interaction - Listening...",payloadStyles),j.onmouseover=function(){_e||(log("UpdateAnalytics",analyticsStyles),g("clear"),g(),_e=!0,log("widgetEngaged  =   "+_e),E(),log("END UpdateAnalytics",analyticsStyles))},E("send"),log("END initial Analytics",analyticsStyles)}function L(){Te&&(Te.stop(),Te=null),Ee&&(Ee.stop(),Ee=null)}function k(){window.top.igloo?(Se=window.top.igloo,n(),clearInterval(qe)):console.log("igloo not found",window.top.igloo)}window.onload=function(){D.style.display="block"};var q,M,A,W,x,O,C,R,H,B,U=Math.floor(1e3*Math.random()),j=$("snt_trivia_game"),D=friendlyIframeWindow.document.getElementsByClassName("widget_container")[0],G=$("trivia_container"),P=friendlyIframeWindow.document.getElementsByClassName("trivia_image")[0],Q=(friendlyIframeWindow.document.getElementsByClassName("trivia_image_overlay")[0],friendlyIframeWindow.document.getElementsByClassName("trivia_question")[0].getElementsByTagName("p")[0]),Y=friendlyIframeWindow.document.getElementsByClassName("trivia_options")[0],V=(friendlyIframeWindow.document.getElementsByClassName("trivia_options")[0].getElementsByTagName("li"),$("submission_overlay")),z=friendlyIframeWindow.document.getElementsByClassName("submission_display_container")[0],F=$("next_question"),X=$("active_question"),J=$("user_score"),K=$("total_questions"),Z=$("score_comment"),ee=($("skip_question"),friendlyIframeWindow.document.getElementsByClassName("other_content_option_container")),te=friendlyIframeWindow.document.getElementsByClassName("animation_container"),ne=$("completed_overlay"),ie=$("correct_result_display"),ae=friendlyIframeWindow.document.getElementsByClassName("results_chart"),oe=friendlyIframeWindow.document.getElementsByClassName("results_chart_value"),se=friendlyIframeWindow.document.getElementsByClassName("random_option")[0],re=$("progress_bar"),le=($("interval_score"),$("interval_score_question")),ce=$("pixelateContainer"),de=$("percentage_of_guess"),ue=$("interval_score_container"),me=(ce.offsetHeight,ce.offsetWidth,"./images/"),ve=(window.location.href,!1),fe=5,pe=1,ye=0,ge=[],he=[],_e=!1,we=10,Ie=0,be=50;window.top.onbeforeunload=function(e){E("send"),console.log("window onbeforeunload post sent")};var Te,Ee,Se,Ne,Le,ke,qe,Me,Ae,We=0,xe=!0;1!=xe||"complete"!=friendlyIframeWindow.document.readyState&&"interactive"!=friendlyIframeWindow.document.readyState?friendlyIframeWindow.document.onreadystatechange=function(){1!=xe||"complete"!=friendlyIframeWindow.document.readyState&&"interactive"!=friendlyIframeWindow.document.readyState||(xe=!1,qe=setInterval(k,100))}:(xe=!1,qe=setInterval(k,100))},firstWidgetRun=!0;widgetSetup();